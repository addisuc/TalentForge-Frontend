<div class="layout" *ngIf="currentUser">
  <app-session-timeout></app-session-timeout>
  <app-toast></app-toast>
  <aside class="sidebar">
    <div class="logo-section">
      <div class="logo">‚ö° TalentForge</div>
      <div *ngIf="showTenantName" class="tenant-name">Acme Recruiting</div>
    </div>
    <nav class="nav-menu">
      <a 
        *ngFor="let item of navigationItems" 
        class="nav-item" 
        [routerLink]="item.route" 
        routerLinkActive="active">
        <span class="icon">{{ item.icon }}</span>
        <span>{{ item.label }}</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <a class="nav-item" routerLink="/settings" routerLinkActive="active">
        <span class="icon">‚öôÔ∏è</span>
        <span>Settings</span>
      </a>
      <a class="nav-item" (click)="logout()">
        <span class="icon">üö™</span>
        <span>Logout</span>
      </a>
    </div>
  </aside>

  <main class="main-content">
    <header class="top-bar">
      <div class="search-bar">
        <span class="icon search-icon" (click)="performGlobalSearch()">üîç</span>
        <input type="text" [(ngModel)]="globalSearchTerm" (keyup.enter)="performGlobalSearch()" (input)="onSearchInput()" [placeholder]="searchPlaceholder">
        <button *ngIf="globalSearchTerm" class="clear-search" (click)="clearSearch()">√ó</button>
      </div>
      <div class="top-actions">
        <button class="icon-btn notification-bell" (click)="toggleNotifications()" [class.has-notifications]="hasNotifications">
          üîî
          <span class="notification-badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
        </button>
        <div class="notification-dropdown" *ngIf="showNotifications">
          <div class="notification-header">
            <h4>Notifications</h4>
            <button class="close-btn" (click)="closeNotifications()">√ó</button>
          </div>
          <div class="notification-list">
            <div *ngFor="let notification of notifications" class="notification-item">
              <p class="notification-title">{{ notification.title }}</p>
              <p class="notification-message">{{ notification.message }}</p>
              <span class="notification-time">{{ notification.time }}</span>
            </div>
            <div *ngIf="notifications.length === 0" class="no-notifications">
              <p>No new notifications</p>
            </div>
          </div>
        </div>
        <div class="user-profile" (click)="navigateToProfile()">
          <div class="avatar">{{ userInitials }}</div>
          <span>{{ userName }}</span>
        </div>
      </div>
    </header>

    <div class="content">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
