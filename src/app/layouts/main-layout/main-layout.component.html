<div class="layout" *ngIf="currentUser">
  <app-session-timeout></app-session-timeout>
  <app-toast></app-toast>
  <aside class="sidebar">
    <div class="logo-section">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 100 100" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
          <defs>
            <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#0066ff;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#00d4ff;stop-opacity:1" />
            </linearGradient>
          </defs>
          <text x="15" y="45" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="url(#logoGradient)">T</text>
          <circle cx="50" cy="50" r="12" fill="none" stroke="url(#logoGradient)" stroke-width="3"/>
          <circle cx="47" cy="47" r="2" fill="#ff6b35"/>
          <circle cx="53" cy="47" r="2" fill="#ff6b35"/>
          <circle cx="50" cy="53" r="2" fill="#ff6b35"/>
          <text x="62" y="75" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="url(#logoGradient)">F</text>
        </svg>
        <span style="font-weight: 700; font-size: 1.25rem;">TalentForge</span>
      </div>
      <div *ngIf="showTenantName && currentUser" class="tenant-name">{{ currentUser.tenantName || 'My Company' }}</div>
    </div>
    <nav class="nav-menu">
      <a 
        *ngFor="let item of navigationItems" 
        class="nav-item" 
        [routerLink]="item.route" 
        routerLinkActive="active">
        <span class="icon">{{ item.icon }}</span>
        <span>{{ item.label }}</span>
      </a>
    </nav>
    <div class="sidebar-footer">
      <a class="nav-item" routerLink="/settings" routerLinkActive="active">
        <span class="icon">‚öôÔ∏è</span>
        <span>Settings</span>
      </a>
      <a class="nav-item" (click)="logout()">
        <span class="icon">üö™</span>
        <span>Logout</span>
      </a>
    </div>
  </aside>

  <main class="main-content">
    <header class="top-bar">
      <div class="search-bar">
        <span class="icon search-icon" (click)="performGlobalSearch()">üîç</span>
        <input type="text" [(ngModel)]="globalSearchTerm" (keyup.enter)="performGlobalSearch()" (input)="onSearchInput()" [placeholder]="searchPlaceholder">
        <button *ngIf="globalSearchTerm" class="clear-search" (click)="clearSearch()">√ó</button>
      </div>
      <div class="top-actions">
        <button class="icon-btn help-btn" (click)="toggleHelp()" title="Help & User Manual">
          ‚ùì
        </button>
        <button class="icon-btn notification-bell" (click)="toggleNotifications()" [class.has-notifications]="hasNotifications">
          üîî
          <span class="notification-badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
        </button>
        <div class="help-dropdown" *ngIf="showHelp">
          <div class="help-header">
            <h4>Help & Resources</h4>
            <button class="close-btn" (click)="closeHelp()">√ó</button>
          </div>
          <div class="help-content">
            <div class="help-item" (click)="openUserManual()">
              <span class="help-icon">üìö</span>
              <div>
                <p class="help-title">User Manual</p>
                <p class="help-desc">{{ getUserManualDescription() }}</p>
              </div>
            </div>
            <div class="help-item" (click)="openSupport()">
              <span class="help-icon">üìû</span>
              <div>
                <p class="help-title">Contact Support</p>
                <p class="help-desc">Get help from our support team</p>
              </div>
            </div>
            <div class="help-item" (click)="openFeedback()">
              <span class="help-icon">üìù</span>
              <div>
                <p class="help-title">Send Feedback</p>
                <p class="help-desc">Share your thoughts and suggestions</p>
              </div>
            </div>
          </div>
        </div>
        <div class="notification-dropdown" *ngIf="showNotifications">
          <div class="notification-header">
            <h4>Notifications</h4>
            <button class="close-btn" (click)="closeNotifications()">√ó</button>
          </div>
          <div class="notification-list">
            <div *ngFor="let notification of notifications" class="notification-item">
              <p class="notification-title">{{ notification.title }}</p>
              <p class="notification-message">{{ notification.message }}</p>
              <span class="notification-time">{{ notification.time }}</span>
            </div>
            <div *ngIf="notifications.length === 0" class="no-notifications">
              <p>No new notifications</p>
            </div>
          </div>
        </div>
        <div class="user-profile" (click)="navigateToProfile()">
          <div class="avatar">{{ userInitials }}</div>
          <span>{{ userName }}</span>
        </div>
      </div>
    </header>

    <div class="content">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
