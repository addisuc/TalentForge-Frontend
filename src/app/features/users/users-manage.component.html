<div class="users-page">
  <div class="header">
    <div>
      <h1>Team Members</h1>
      <p>Manage your recruiting team and permissions</p>
    </div>
    <button class="btn-primary" (click)="openInviteModal()">
      <span>➕</span> Invite User
    </button>
  </div>

  <div class="filters">
    <div class="search-bar">
      <span class="icon">🔍</span>
      <input type="text" placeholder="Search team members..." [(ngModel)]="searchQuery">
    </div>
    <select [(ngModel)]="selectedRole">
      <option value="all">All Roles</option>
      <option value="TENANT_ADMIN">Admin</option>
      <option value="RECRUITING_MANAGER">Manager</option>
      <option value="RECRUITER">Recruiter</option>
    </select>
    <select [(ngModel)]="selectedStatus">
      <option value="all">All Status</option>
      <option value="Active">Active</option>
      <option value="Inactive">Inactive</option>
    </select>
  </div>

  <div class="users-grid">
    <div class="user-card" *ngFor="let user of filteredUsers">
      <div class="card-header">
        <div class="avatar">{{ user.avatar }}</div>
        <div class="info">
          <h3>{{ user.name }}</h3>
          <p class="email">{{ user.email }}</p>
        </div>
        <span class="status" [class.active]="user.status === 'Active'" [class.inactive]="user.status === 'Inactive'">
          {{ user.status }}
        </span>
      </div>

      <div class="role-badge">
        <span class="icon">🎯</span>
        {{ getRoleLabel(user.role) }}
      </div>

      <div class="stats">
        <div class="stat">
          <span class="value">{{ user.activeJobs }}</span>
          <span class="label">Active Jobs</span>
        </div>
        <div class="stat">
          <span class="value">{{ user.placements }}</span>
          <span class="label">Placements</span>
        </div>
      </div>

      <div class="footer">
        <span class="last-active">Last active {{ user.lastActive | date:'MMM d, h:mm a' }}</span>
        <button class="btn-link">View Profile →</button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" *ngIf="showInviteModal" (click)="closeInviteModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Invite Team Member</h2>
        <button class="close-btn" (click)="closeInviteModal()">✕</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Email Address</label>
          <input type="email" [(ngModel)]="inviteEmail" (blur)="onEmailBlur()" class="form-control" [class.error]="emailTouched && !isValidEmail()" placeholder="colleague@example.com">
          <p class="error-text" *ngIf="emailTouched && !isValidEmail()">Please enter a valid email address</p>
        </div>
        <div class="form-group">
          <label>Role</label>
          <input type="text" class="form-control" value="Recruiter" readonly>
          <p class="help-text" *ngIf="isRecruiter">You can only invite other recruiters</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeInviteModal()">Cancel</button>
        <button class="btn-primary" [disabled]="!isValidEmail()" (click)="sendInvite()">Send Invitation</button>
      </div>
    </div>
  </div>
</div>
