import{c as $,f as U,h as q,l as N,m as j,n as L,p as D}from"./chunk-NSYUTGZ4.js";import{a as z,b as F}from"./chunk-5W2ODH74.js";import{Ab as k,Bb as O,Ca as m,Da as g,Hb as t,Ib as n,Kc as R,Lb as _,Lc as T,Ob as c,Oc as V,Qb as l,Yb as r,Zb as u,_b as v,ac as S,bc as x,cc as w,dc as C,eb as a,fb as y,fc as E,ga as P,la as I,ta as M,xb as h,zb as p}from"./chunk-4D7AL5UB.js";var A=(()=>{class s{constructor(e){this.http=e,this.apiUrl="/api/interviews"}getAllInterviews(){return this.http.get(this.apiUrl)}getInterviewById(e){return this.http.get(`${this.apiUrl}/${e}`)}getInterviewsByApplication(e){return this.http.get(`${this.apiUrl}/application/${e}`)}getUpcomingInterviews(e=30){let o=new z().set("days",e.toString());return this.http.get(`${this.apiUrl}/upcoming`,{params:o})}createInterview(e){return this.http.post(this.apiUrl,e)}updateInterview(e,o){return this.http.put(`${this.apiUrl}/${e}`,o)}requestReschedule(e,o){return this.http.post(`${this.apiUrl}/${e}/reschedule`,o)}cancelInterview(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(o){return new(o||s)(I(F))}}static{this.\u0275prov=P({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();function H(s,f){if(s&1){let e=_();t(0,"button",18),c("click",function(){m(e);let i=l().$implicit,d=l();return g(d.joinInterview(i))}),r(1,"Join"),n()}}function J(s,f){if(s&1){let e=_();t(0,"button",19),c("click",function(){m(e);let i=l().$implicit,d=l();return g(d.requestReschedule(i))}),r(1,"Request Reschedule"),n()}}function G(s,f){if(s&1&&(t(0,"tr")(1,"td")(2,"strong"),r(3),n()(),t(4,"td"),r(5),n(),t(6,"td"),r(7),n(),t(8,"td"),r(9),n(),t(10,"td")(11,"span",14),r(12),n()(),t(13,"td"),h(14,H,2,0,"button",15),t(15,"button",16),r(16,"Details"),n(),h(17,J,2,0,"button",17),n()()),s&2){let e=f.$implicit;a(3),u(e.position),a(2),u(e.company),a(2),u(e.datetime),a(2),u(e.type),a(2),O(e.status.toLowerCase()),a(),u(e.status),a(2),p("ngIf",e.status==="Scheduled"&&e.meetingLink),a(3),p("ngIf",e.status==="Scheduled")}}function K(s,f){if(s&1){let e=_();t(0,"button",20),c("click",function(){let i=m(e).$implicit,d=l();return g(d.goToPage(i))}),r(1),n()}if(s&2){let e=f.$implicit,o=l();k("active",e===o.currentPage),a(),u(e)}}function Q(s,f){if(s&1){let e=_();t(0,"div",21),c("click",function(){m(e);let i=l();return g(i.showRescheduleModal=!1)}),t(1,"div",22),c("click",function(i){return m(e),g(i.stopPropagation())}),t(2,"div",23)(3,"h2"),r(4,"Request Reschedule"),n(),t(5,"button",24),c("click",function(){m(e);let i=l();return g(i.showRescheduleModal=!1)}),r(6,"\u2715"),n()(),t(7,"div",25)(8,"p")(9,"strong"),r(10),n(),r(11),n(),t(12,"p"),r(13),n(),t(14,"div",26)(15,"label"),r(16,"Reason for Reschedule"),n(),t(17,"textarea",27),C("ngModelChange",function(i){m(e);let d=l();return w(d.rescheduleReason,i)||(d.rescheduleReason=i),g(i)}),n()()(),t(18,"div",28)(19,"button",29),c("click",function(){m(e);let i=l();return g(i.showRescheduleModal=!1)}),r(20,"Cancel"),n(),t(21,"button",30),c("click",function(){m(e);let i=l();return g(i.submitReschedule())}),r(22,"Submit Request"),n()()()()}if(s&2){let e=l();a(10),u(e.selectedInterview==null?null:e.selectedInterview.position),a(),v(" at ",e.selectedInterview==null?null:e.selectedInterview.company,""),a(2),v("Current: ",e.selectedInterview==null?null:e.selectedInterview.datetime,""),a(4),x("ngModel",e.rescheduleReason)}}var ie=(()=>{class s{constructor(e){this.interviewService=e,this.currentPage=1,this.itemsPerPage=25,this.interviews=[],this.loading=!1,this.error="",this.showRescheduleModal=!1,this.selectedInterview=null,this.rescheduleReason=""}ngOnInit(){this.loadInterviews()}loadInterviews(){this.loading=!0,this.error="",this.interviewService.getUpcomingInterviews(90).subscribe({next:e=>{this.interviews=e.map(o=>this.mapInterviewToDisplay(o)),this.loading=!1},error:e=>{console.error("Error loading interviews:",e),this.error="Failed to load interviews",this.loading=!1}})}mapInterviewToDisplay(e){return{id:e.id,position:e.interviewType,company:e.interviewerName||"Company",datetime:new Date(e.scheduledAt).toLocaleString(),type:e.meetingPlatform||"Not specified",status:e.status,meetingLink:e.meetingLink}}get totalInterviews(){return this.interviews.length}get totalPages(){return Math.ceil(this.totalInterviews/this.itemsPerPage)}get startIndex(){return(this.currentPage-1)*this.itemsPerPage}get endIndex(){return Math.min(this.startIndex+this.itemsPerPage,this.totalInterviews)}get paginatedInterviews(){return this.interviews.slice(this.startIndex,this.endIndex)}get pageNumbers(){let e=[];for(let o=1;o<=this.totalPages;o++)e.push(o);return e}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}goToPage(e){this.currentPage=e}onItemsPerPageChange(){this.currentPage=1}joinInterview(e){e.meetingLink&&window.open(e.meetingLink,"_blank")}requestReschedule(e){this.selectedInterview=e,this.rescheduleReason="",this.showRescheduleModal=!0}submitReschedule(){if(!this.rescheduleReason.trim()){alert("Please provide a reason for rescheduling");return}let e={reason:this.rescheduleReason};this.interviewService.requestReschedule(this.selectedInterview.id,e).subscribe({next:()=>{alert(`Reschedule request submitted for ${this.selectedInterview.position}`),this.showRescheduleModal=!1,this.loadInterviews()},error:o=>{console.error("Error requesting reschedule:",o),alert("Failed to submit reschedule request")}})}static{this.\u0275fac=function(o){return new(o||s)(y(A))}}static{this.\u0275cmp=M({type:s,selectors:[["app-candidate-interviews"]],standalone:!0,features:[E],decls:42,vars:12,consts:[[1,"candidate-interviews-page"],[1,"page-header"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"pagination"],[1,"pagination-left"],[1,"pagination-info"],[1,"items-per-page",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"pagination-controls"],[1,"btn-page",3,"click","disabled"],["class","btn-page",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"badge"],["class","btn-action",3,"click",4,"ngIf"],[1,"btn-action","secondary"],["class","btn-action secondary",3,"click",4,"ngIf"],[1,"btn-action",3,"click"],[1,"btn-action","secondary",3,"click"],[1,"btn-page",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["rows","3","placeholder","Please explain why you need to reschedule...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"]],template:function(o,i){o&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),r(3,"My Interviews"),n(),t(4,"p"),r(5,"Upcoming and past interview schedule"),n()(),t(6,"div",2)(7,"table",3)(8,"thead")(9,"tr")(10,"th"),r(11,"Position"),n(),t(12,"th"),r(13,"Company"),n(),t(14,"th"),r(15,"Date & Time"),n(),t(16,"th"),r(17,"Type"),n(),t(18,"th"),r(19,"Status"),n(),t(20,"th"),r(21,"Actions"),n()()(),t(22,"tbody"),h(23,G,18,9,"tr",4),n()()(),t(24,"div",5)(25,"div",6)(26,"div",7),r(27),n(),t(28,"select",8),C("ngModelChange",function(b){return w(i.itemsPerPage,b)||(i.itemsPerPage=b),b}),c("change",function(){return i.onItemsPerPageChange()}),t(29,"option",9),r(30,"25 per page"),n(),t(31,"option",9),r(32,"50 per page"),n(),t(33,"option",9),r(34,"100 per page"),n()()(),t(35,"div",10)(36,"button",11),c("click",function(){return i.previousPage()}),r(37,"Previous"),n(),h(38,K,2,3,"button",12),t(39,"button",11),c("click",function(){return i.nextPage()}),r(40,"Next"),n()()(),h(41,Q,23,4,"div",13),n()),o&2&&(a(23),p("ngForOf",i.paginatedInterviews),a(4),S("Showing ",i.startIndex+1,"-",i.endIndex," of ",i.totalInterviews,""),a(),x("ngModel",i.itemsPerPage),a(),p("value",25),a(2),p("value",50),a(2),p("value",100),a(3),p("disabled",i.currentPage===1),a(2),p("ngForOf",i.pageNumbers),a(),p("disabled",i.currentPage===i.totalPages),a(2),p("ngIf",i.showRescheduleModal))},dependencies:[V,R,T,D,j,L,$,N,U,q],styles:[".candidate-interviews-page[_ngcontent-%COMP%]{padding:2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;overflow-x:auto;margin-bottom:1rem}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:2px solid #e2e8f0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:left;font-weight:600;font-size:.875rem;color:#475569}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f5f9}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;font-size:.875rem;color:#0f172a}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:.75rem;font-weight:600}.badge.scheduled[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.badge.completed[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.badge.cancelled[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.btn-action[_ngcontent-%COMP%]{background:#06f;color:#fff;border:none;padding:6px 12px;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;margin-right:8px;white-space:nowrap}.btn-action.secondary[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e2e8f0}.pagination-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.pagination-info[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.items-per-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:.875rem;color:#64748b;background:#fff;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-page[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:6px 12px;border-radius:6px;font-size:.875rem;cursor:pointer}.btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc}.btn-page.active[_ngcontent-%COMP%]{background:#06f;color:#fff;border-color:#06f}.btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;box-shadow:0 20px 25px -5px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e2e8f0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0f172a;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#64748b;cursor:pointer;padding:0;width:32px;height:32px}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;color:#475569}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#0f172a;margin-bottom:.5rem;font-size:.875rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem;font-family:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1.5rem;border-top:1px solid #e2e8f0}.btn-primary[_ngcontent-%COMP%]{background:#06f;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;font-size:.875rem}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;font-size:.875rem}"]})}}return s})();export{ie as CandidateInterviewsComponent};
