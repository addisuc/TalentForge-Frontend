{
  "version": 3,
  "sources": ["src/app/core/services/application.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { tap, catchError } from 'rxjs/operators';\nimport { InterviewRequest, Interview } from './interview.service';\n\nexport type ApplicationStatus = \n  | 'APPLIED'\n  | 'SCREENING'\n  | 'PHONE_INTERVIEW'\n  | 'SUBMITTED_TO_CLIENT'\n  | 'CLIENT_INTERVIEW'\n  | 'REFERENCE_CHECK'\n  | 'BACKGROUND_CHECK'\n  | 'OFFER_PENDING'\n  | 'OFFER_ACCEPTED'\n  | 'OFFER_DECLINED'\n  | 'HIRED'\n  | 'REJECTED'\n  | 'WITHDRAWN';\n\nexport interface JobApplication {\n  id: string;\n  jobId: string;\n  candidateId: string;\n  status: ApplicationStatus;\n  appliedAt: string;\n  updatedAt: string;\n  jobTitle?: string;\n  companyName?: string;\n  candidateName?: string;\n  candidateEmail?: string;\n  coverLetter?: string;\n  clientId?: number;\n  resumeUrl?: string;\n  backgroundCheckStatus?: 'PENDING' | 'IN_PROGRESS' | 'COMPLETED' | 'FAILED';\n  backgroundCheckProvider?: 'CHECKR' | 'HIRERIGHT' | 'STERLING';\n  referenceCheckStatus?: 'PENDING' | 'IN_PROGRESS' | 'COMPLETED';\n  offerDetails?: OfferDetails;\n}\n\nexport interface OfferDetails {\n  salary?: number;\n  startDate?: string;\n  offerLetterUrl?: string;\n  expiresAt?: string;\n}\n\nexport interface ApplicationRequest {\n  jobId: string;\n  coverLetter?: string;\n}\n\nexport interface WithdrawApplicationRequest {\n  reason: string;\n}\n\nexport interface ApplicationPage {\n  content: JobApplication[];\n  totalElements: number;\n  totalPages: number;\n  size: number;\n  number: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApplicationService {\n  private apiUrl = '/api/applications';\n\n  constructor(private http: HttpClient) {}\n\n  submitApplication(request: ApplicationRequest): Observable<JobApplication> {\n    return this.http.post<JobApplication>(this.apiUrl, request);\n  }\n\n  getApplication(id: string): Observable<JobApplication> {\n    return this.http.get<JobApplication>(`${this.apiUrl}/${id}`);\n  }\n\n  getAllApplications(page: number = 0, size: number = 20): Observable<ApplicationPage> {\n    const params = new HttpParams()\n      .set('page', page.toString())\n      .set('size', size.toString());\n    return this.http.get<ApplicationPage>(this.apiUrl, { params });\n  }\n\n  getMyApplications(page: number = 0, size: number = 20): Observable<ApplicationPage> {\n    const params = new HttpParams()\n      .set('page', page.toString())\n      .set('size', size.toString());\n    return this.http.get<ApplicationPage>(`${this.apiUrl}/me`, { params });\n  }\n\n  getApplicationsByCandidate(candidateId: string, page: number = 0, size: number = 20): Observable<ApplicationPage> {\n    const params = new HttpParams()\n      .set('page', page.toString())\n      .set('size', size.toString());\n    return this.http.get<ApplicationPage>(`${this.apiUrl}/candidate/${candidateId}`, { params });\n  }\n\n  getApplicationsByJob(jobId: string, page: number = 0, size: number = 20): Observable<ApplicationPage> {\n    const params = new HttpParams()\n      .set('page', page.toString())\n      .set('size', size.toString());\n    return this.http.get<ApplicationPage>(`${this.apiUrl}/job/${jobId}`, { params });\n  }\n\n  updateApplicationStatus(id: string, status: string): Observable<JobApplication> {\n    console.log(`Updating application ${id} to status: ${status}`);\n    return this.http.put<JobApplication>(`${this.apiUrl}/${id}/status`, { status }).pipe(\n      tap(response => console.log('Status update response:', response)),\n      catchError(error => {\n        console.error('Status update error:', error);\n        throw error;\n      })\n    );\n  }\n\n  withdrawApplication(id: string, request?: WithdrawApplicationRequest): Observable<JobApplication> {\n    if (request) {\n      // Send withdrawal with reason, but still update status to WITHDRAWN\n      return this.http.put<JobApplication>(`${this.apiUrl}/${id}/status`, { \n        status: 'WITHDRAWN',\n        reason: request.reason \n      });\n    }\n    return this.http.put<JobApplication>(`${this.apiUrl}/${id}/status`, { status: 'WITHDRAWN' });\n  }\n\n  createInterview(request: InterviewRequest): Observable<Interview> {\n    return this.http.post<Interview>('/api/interviews', request);\n  }\n\n  // Background Check Integration (Placeholder)\n  initiateBackgroundCheck(applicationId: string, provider: 'CHECKR' | 'HIRERIGHT' | 'STERLING'): Observable<any> {\n    return this.http.post(`${this.apiUrl}/${applicationId}/background-check`, { provider });\n  }\n\n  getBackgroundCheckStatus(applicationId: string): Observable<any> {\n    return this.http.get(`${this.apiUrl}/${applicationId}/background-check`);\n  }\n\n  // Reference Check Integration (Placeholder)\n  requestReferenceCheck(applicationId: string, references: ReferenceRequest[]): Observable<any> {\n    return this.http.post(`${this.apiUrl}/${applicationId}/reference-check`, { references });\n  }\n\n  getReferenceCheckStatus(applicationId: string): Observable<any> {\n    return this.http.get(`${this.apiUrl}/${applicationId}/reference-check`);\n  }\n\n  // Offer Management\n  extendOffer(applicationId: string, offer: OfferDetails): Observable<any> {\n    const payload = {\n      applicationId: applicationId,\n      salary: offer.salary,\n      startDate: offer.startDate,\n      offerLetterUrl: offer.offerLetterUrl,\n      expiresAt: offer.expiresAt\n    };\n    return this.http.post<any>('/api/offers', payload);\n  }\n\n  respondToOffer(applicationId: string, accept: boolean): Observable<any> {\n    const status = accept ? 'ACCEPTED' : 'DECLINED';\n    return this.http.put<any>(`/api/offers/${applicationId}/respond`, { status });\n  }\n\n  getApplicationTimeline(applicationId: string): Observable<ApplicationActivity[]> {\n    return this.http.get<ApplicationActivity[]>(`${this.apiUrl}/${applicationId}/timeline`);\n  }\n\n  getClientSubmissions(companyId: string, page: number = 0, size: number = 20): Observable<ApplicationPage> {\n    const params = new HttpParams()\n      .set('page', page.toString())\n      .set('size', size.toString());\n    return this.http.get<ApplicationPage>(`${this.apiUrl}/client/${companyId}/submissions`, { params });\n  }\n}\n\nexport interface ReferenceRequest {\n  name: string;\n  email: string;\n  phone?: string;\n  relationship: string;\n  company?: string;\n}\n\nexport interface ApplicationActivity {\n  id: string;\n  activityType: string;\n  oldStatus?: string;\n  newStatus?: string;\n  description: string;\n  createdAt: string;\n  createdBy?: string;\n  createdByName?: string;\n}"],
  "mappings": "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",
  "names": []
}
