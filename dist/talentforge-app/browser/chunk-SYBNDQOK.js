import{a as B}from"./chunk-5E5QDVKI.js";import{a as T}from"./chunk-JPQV322R.js";import{a as $}from"./chunk-JB7SMGNS.js";import{c as A,f as D,h as V,l as L,m as z,n as F,p as N}from"./chunk-NSYUTGZ4.js";import{k as I}from"./chunk-UY2YNJ4I.js";import"./chunk-5W2ODH74.js";import{Ab as S,Ca as m,Da as g,Hb as n,Ib as o,Jb as O,Kc as k,Lb as x,Lc as E,Ob as d,Oc as j,Qb as s,Yb as r,Zb as u,_b as b,ac as w,bc as v,cc as y,dc as P,eb as a,fb as h,fc as J,ta as M,xb as _,zb as c}from"./chunk-4D7AL5UB.js";function R(l,f){if(l&1){let e=x();n(0,"div",16)(1,"div",17)(2,"h3"),r(3),o(),n(4,"button",18),r(5,"\u2B50"),o()(),n(6,"div",19),r(7),o(),n(8,"div",20)(9,"span"),r(10),o(),n(11,"span"),r(12),o(),n(13,"span"),r(14),o()(),n(15,"p",21),r(16),o(),n(17,"button",22),d("click",function(){let i=m(e).$implicit,p=s();return g(p.applyToJob(i))}),r(18,"Apply Now"),o()()}if(l&2){let e=f.$implicit,t=s();a(3),u(e.title),a(4),u(t.getCompanyName(e)),a(3),b("\u{1F4CD} ",t.getLocationString(e),""),a(2),b("\u{1F4B0} ",t.getSalaryRange(e),""),a(2),b("\u23F0 ",t.getJobTypeDisplay(e),""),a(2),u(e.description)}}function W(l,f){if(l&1){let e=x();n(0,"button",23),d("click",function(){let i=m(e).$implicit,p=s();return g(p.goToPage(i))}),r(1),o()}if(l&2){let e=f.$implicit,t=s();S("active",e===t.currentPage),a(),u(e)}}function U(l,f){if(l&1){let e=x();n(0,"div",32)(1,"div",33)(2,"h3"),r(3),o(),n(4,"p",34),r(5),o(),n(6,"div",35)(7,"span"),r(8),o(),n(9,"span"),r(10),o(),n(11,"span"),r(12),o()()(),n(13,"div",36)(14,"h4"),r(15,"Application Details"),o(),n(16,"div",37)(17,"label",38),r(18,"Cover Letter (Optional)"),o(),n(19,"textarea",39),P("ngModelChange",function(i){m(e);let p=s(2);return y(p.coverLetter,i)||(p.coverLetter=i),g(i)}),r(20,"                "),o(),n(21,"p",40),r(22,"A well-written cover letter can help your application stand out."),o()()()()}if(l&2){let e=s(2);a(3),u(e.selectedJob.title),a(2),u(e.getCompanyName(e.selectedJob)),a(3),b("\u{1F4CD} ",e.getLocationString(e.selectedJob),""),a(2),b("\u{1F4B0} ",e.getSalaryRange(e.selectedJob),""),a(2),b("\u23F0 ",e.getJobTypeDisplay(e.selectedJob),""),a(7),v("ngModel",e.coverLetter)}}function q(l,f){if(l&1){let e=x();n(0,"div",24),d("click",function(){m(e);let i=s();return g(i.closeApplicationModal())}),n(1,"div",25),d("click",function(i){return m(e),g(i.stopPropagation())}),n(2,"div",26)(3,"h2"),r(4,"Apply for Position"),o(),n(5,"button",27),d("click",function(){m(e);let i=s();return g(i.closeApplicationModal())}),r(6,"\u2715"),o()(),_(7,U,23,6,"div",28),n(8,"div",29)(9,"button",30),d("click",function(){m(e);let i=s();return g(i.closeApplicationModal())}),r(10,"Cancel"),o(),n(11,"button",31),d("click",function(){m(e);let i=s();return g(i.submitApplication())}),r(12),o()()()()}if(l&2){let e=s();a(7),c("ngIf",e.selectedJob),a(4),c("disabled",e.submittingApplication),a(),b(" ",e.submittingApplication?"Submitting...":"Submit Application"," ")}}var ne=(()=>{class l{constructor(e,t,i){this.jobService=e,this.applicationService=t,this.authService=i,this.currentPage=1,this.itemsPerPage=25,this.jobs=[],this.totalJobs=0,this.totalPages=0,this.loading=!1,this.showApplicationModal=!1,this.selectedJob=null,this.coverLetter="",this.submittingApplication=!1}ngOnInit(){this.loadJobs()}loadJobs(){this.loading=!0;let e=this.currentPage-1;this.jobService.getAllJobs(e,this.itemsPerPage).subscribe({next:t=>{this.jobs=t.content,this.totalJobs=t.totalElements,this.totalPages=t.totalPages,this.loading=!1},error:t=>{console.error("Error loading jobs:",t),this.loading=!1}})}getCompanyName(e){if(e.description&&e.description.includes("Company:")){let t=e.description.match(/Company: ([^\n]+)/);if(t)return t[1]}return"Company"}getLocationString(e){if(typeof e.location=="string"){let t=e.location.replace(/^"|"$/g,"");try{let i=JSON.parse(t);return i.city&&i.state?`${i.city}, ${i.state}`:i.remote?"Remote":t}catch{return t}}return"Location TBD"}getSalaryRange(e){return e.salaryMin&&e.salaryMax?`$${e.salaryMin.toLocaleString()} - $${e.salaryMax.toLocaleString()}`:e.salaryMin?`$${e.salaryMin.toLocaleString()}+`:"Salary TBD"}getJobTypeDisplay(e){return e.jobType?e.jobType.replace("_"," ").toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"Full Time"}get startIndex(){return(this.currentPage-1)*this.itemsPerPage}get endIndex(){return Math.min(this.startIndex+this.itemsPerPage,this.totalJobs)}get paginatedJobs(){return this.jobs}get pageNumbers(){let e=[];for(let t=1;t<=this.totalPages;t++)e.push(t);return e}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadJobs())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadJobs())}goToPage(e){this.currentPage=e,this.loadJobs()}onItemsPerPageChange(){this.currentPage=1,this.loadJobs()}applyToJob(e){if(!this.authService.getCurrentUserValue()){alert("Please log in to apply for jobs.");return}this.selectedJob=e,this.coverLetter="",this.showApplicationModal=!0}closeApplicationModal(){this.showApplicationModal=!1,this.selectedJob=null,this.coverLetter=""}submitApplication(){if(!this.selectedJob)return;this.submittingApplication=!0;let e={jobId:this.selectedJob.id,coverLetter:this.coverLetter||void 0};this.applicationService.submitApplication(e).subscribe({next:t=>{alert(`Successfully applied to: ${this.selectedJob.title}

Your application has been submitted!`),this.closeApplicationModal(),this.submittingApplication=!1},error:t=>{console.error("Error submitting application:",t),alert("Failed to submit application. Please try again."),this.submittingApplication=!1}})}static{this.\u0275fac=function(t){return new(t||l)(h($),h(B),h(T))}}static{this.\u0275cmp=M({type:l,selectors:[["app-candidate-jobs"]],standalone:!0,features:[J],decls:42,vars:12,consts:[[1,"candidate-jobs-page"],[1,"page-header"],[1,"filters"],["type","text","placeholder","Search jobs...",1,"search-input"],[1,"filter-select"],[1,"jobs-grid"],["class","job-card",4,"ngFor","ngForOf"],[1,"pagination"],[1,"pagination-left"],[1,"pagination-info"],[1,"items-per-page",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"pagination-controls"],[1,"btn-page",3,"click","disabled"],["class","btn-page",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"job-card"],[1,"job-header"],[1,"btn-save"],[1,"job-company"],[1,"job-details"],[1,"job-description"],[1,"btn-apply",3,"click"],[1,"btn-page",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click","disabled"],[1,"modal-body"],[1,"job-summary"],[1,"company"],[1,"job-meta"],[1,"form-section"],[1,"form-group"],["for","coverLetter"],["id","coverLetter","rows","6","placeholder","Tell us why you're interested in this position and what makes you a great fit...",1,"form-control",3,"ngModelChange","ngModel"],[1,"help-text"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Job Search"),o(),n(4,"p"),r(5,"Find your next opportunity"),o()(),n(6,"div",2),O(7,"input",3),n(8,"select",4)(9,"option"),r(10,"All Locations"),o(),n(11,"option"),r(12,"Remote"),o(),n(13,"option"),r(14,"On-site"),o()(),n(15,"select",4)(16,"option"),r(17,"All Types"),o(),n(18,"option"),r(19,"Full-time"),o(),n(20,"option"),r(21,"Contract"),o()()(),n(22,"div",5),_(23,R,19,6,"div",6),o(),n(24,"div",7)(25,"div",8)(26,"div",9),r(27),o(),n(28,"select",10),P("ngModelChange",function(C){return y(i.itemsPerPage,C)||(i.itemsPerPage=C),C}),d("change",function(){return i.onItemsPerPageChange()}),n(29,"option",11),r(30,"25 per page"),o(),n(31,"option",11),r(32,"50 per page"),o(),n(33,"option",11),r(34,"100 per page"),o()()(),n(35,"div",12)(36,"button",13),d("click",function(){return i.previousPage()}),r(37,"Previous"),o(),_(38,W,2,3,"button",14),n(39,"button",13),d("click",function(){return i.nextPage()}),r(40,"Next"),o()()(),_(41,q,13,3,"div",15),o()),t&2&&(a(23),c("ngForOf",i.paginatedJobs),a(4),w("Showing ",i.startIndex+1,"-",i.endIndex," of ",i.totalJobs,""),a(),v("ngModel",i.itemsPerPage),a(),c("value",25),a(2),c("value",50),a(2),c("value",100),a(3),c("disabled",i.currentPage===1),a(2),c("ngForOf",i.pageNumbers),a(),c("disabled",i.currentPage===i.totalPages),a(2),c("ngIf",i.showApplicationModal))},dependencies:[j,k,E,N,z,F,A,L,D,V,I],styles:[".candidate-jobs-page[_ngcontent-%COMP%]{padding:2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b}.filters[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem}.search-input[_ngcontent-%COMP%], .filter-select[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem}.search-input[_ngcontent-%COMP%]{flex:1}.jobs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem;margin-bottom:2rem}.job-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:1.5rem}.job-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;margin-bottom:.5rem}.job-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#0f172a;margin:0}.btn-save[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;cursor:pointer}.job-company[_ngcontent-%COMP%]{color:#64748b;font-weight:500;margin-bottom:.75rem}.job-details[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:.875rem;color:#64748b;margin-bottom:1rem}.job-description[_ngcontent-%COMP%]{color:#475569;font-size:.875rem;line-height:1.5;margin-bottom:1rem}.btn-apply[_ngcontent-%COMP%]{background:#06f;color:#fff;border:none;padding:10px 20px;border-radius:8px;font-weight:600;cursor:pointer;width:100%}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e2e8f0}.pagination-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.pagination-info[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.items-per-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:.875rem;color:#64748b;background:#fff;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-page[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:6px 12px;border-radius:6px;font-size:.875rem;cursor:pointer}.btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc}.btn-page.active[_ngcontent-%COMP%]{background:#06f;color:#fff;border-color:#06f}.btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px;border-bottom:1px solid #e2e8f0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#64748b;cursor:pointer;padding:0;width:32px;height:32px}.close-btn[_ngcontent-%COMP%]:hover{color:#0f172a}.modal-body[_ngcontent-%COMP%]{padding:24px}.job-summary[_ngcontent-%COMP%]{background:#f8fafc;padding:20px;border-radius:8px;margin-bottom:24px;border:1px solid #e2e8f0}.job-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#0f172a;margin:0 0 8px}.job-summary[_ngcontent-%COMP%]   .company[_ngcontent-%COMP%]{color:#64748b;font-weight:500;margin:0 0 12px}.job-meta[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:.875rem;color:#64748b;flex-wrap:wrap}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#0f172a;margin:0 0 16px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#0f172a;margin-bottom:8px;font-size:.875rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem;box-sizing:border-box;font-family:inherit}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#06f}.help-text[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;margin-top:4px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:24px;border-top:1px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#06f;border:1px solid #0066ff;padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f0f7ff}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})}}return l})();export{ne as CandidateJobsComponent};
