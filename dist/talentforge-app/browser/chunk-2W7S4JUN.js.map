{
  "version": 3,
  "sources": ["src/app/core/services/tenant.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { Tenant, CreateTenantRequest, Subscription, Invoice } from '../models/tenant.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TenantService {\n  private apiUrl = '/api/tenants';\n\n  constructor(private http: HttpClient) {}\n\n  getAllTenants(page: number = 0, size: number = 25): Observable<any> {\n    const params = new HttpParams()\n      .set('page', page.toString())\n      .set('size', size.toString());\n    return this.http.get<any>(this.apiUrl, { params });\n  }\n\n  getTenant(id: string): Observable<Tenant> {\n    return this.http.get<Tenant>(`${this.apiUrl}/${id}`);\n  }\n\n  createTenant(request: CreateTenantRequest): Observable<Tenant> {\n    return this.http.post<Tenant>(this.apiUrl, request);\n  }\n\n  updateTenant(id: string, data: Partial<Tenant>): Observable<Tenant> {\n    return this.http.put<Tenant>(`${this.apiUrl}/${id}`, data);\n  }\n\n  suspendTenant(id: string): Observable<void> {\n    return this.http.post<void>(`${this.apiUrl}/${id}/suspend`, {});\n  }\n\n  activateTenant(id: string): Observable<void> {\n    return this.http.post<void>(`${this.apiUrl}/${id}/activate`, {});\n  }\n\n  deleteTenant(id: string): Observable<void> {\n    return this.http.delete<void>(`${this.apiUrl}/${id}`);\n  }\n\n  // Billing\n  getSubscription(tenantId: string): Observable<Subscription> {\n    return this.http.get<Subscription>(`${this.apiUrl}/${tenantId}/subscription`);\n  }\n\n  updateSubscription(tenantId: string, plan: string): Observable<Subscription> {\n    return this.http.put<Subscription>(`${this.apiUrl}/${tenantId}/subscription`, { plan });\n  }\n\n  cancelSubscription(tenantId: string): Observable<void> {\n    return this.http.post<void>(`${this.apiUrl}/${tenantId}/subscription/cancel`, {});\n  }\n\n  getInvoices(tenantId?: string, page: number = 0, size: number = 25): Observable<any> {\n    let params = new HttpParams()\n      .set('page', page.toString())\n      .set('size', size.toString());\n    \n    if (tenantId) {\n      params = params.set('tenantId', tenantId);\n    }\n    \n    return this.http.get<any>('/api/billing/invoices', { params });\n  }\n\n  retryPayment(invoiceId: string): Observable<void> {\n    return this.http.post<void>(`/api/billing/invoices/${invoiceId}/retry`, {});\n  }\n\n  refundPayment(invoiceId: string): Observable<void> {\n    return this.http.post<void>(`/api/billing/invoices/${invoiceId}/refund`, {});\n  }\n\n  markInvoiceAsPaid(invoiceId: string): Observable<void> {\n    return this.http.post<void>(`/api/billing/invoices/${invoiceId}/mark-paid`, {});\n  }\n\n  voidInvoice(invoiceId: string): Observable<void> {\n    return this.http.post<void>(`/api/billing/invoices/${invoiceId}/void`, {});\n  }\n\n  createManualInvoice(data: any): Observable<any> {\n    return this.http.post<any>('/api/billing/invoices', data);\n  }\n\n  sendInvoice(invoiceId: string): Observable<void> {\n    return this.http.post<void>(`/api/billing/invoices/${invoiceId}/send`, {});\n  }\n\n  updateInvoice(invoiceId: string, data: any): Observable<any> {\n    return this.http.put<any>(`/api/billing/invoices/${invoiceId}`, data);\n  }\n\n  getInvoice(invoiceId: string): Observable<Invoice> {\n    return this.http.get<Invoice>(`/api/billing/invoices/${invoiceId}`);\n  }\n\n  downloadInvoice(invoiceId: string): Observable<Blob> {\n    return this.http.get(`/api/billing/invoices/${invoiceId}/download`, { responseType: 'blob' });\n  }\n\n  getPendingRefunds(): Observable<any[]> {\n    return this.http.get<any[]>('/api/billing/invoices/refunds/pending');\n  }\n\n  approveRefund(creditNoteId: string): Observable<void> {\n    return this.http.post<void>(`/api/billing/invoices/refunds/${creditNoteId}/approve`, {});\n  }\n\n  rejectRefund(creditNoteId: string, reason: string): Observable<void> {\n    return this.http.post<void>(`/api/billing/invoices/refunds/${creditNoteId}/reject`, { reason });\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
