import{a as W}from"./chunk-OBD3CFZT.js";import{c as B,f as N,h as A,q as j}from"./chunk-YXQLQ2ZV.js";import"./chunk-AHQOJUUW.js";import{a as M,b as V}from"./chunk-WIHTSVPG.js";import{$b as r,Bb as p,Da as m,Ea as c,Jb as n,Kb as o,Lb as D,Nb as y,Oc as I,Pc as T,Qb as f,Sb as _,Tc as U,_b as O,ac as h,bc as F,cc as v,ec as C,fc as x,gb as d,gc as b,ha as w,hb as S,ic as z,ma as E,ua as k,zb as P}from"./chunk-EGDJTDOV.js";var L=(()=>{class l{constructor(e){this.http=e,this.apiUrl="/api/users"}getUserProfile(e){return this.http.get(`${this.apiUrl}/profile/${e}`)}updateUser(e,i){return this.http.put(`${this.apiUrl}/${e}`,i)}searchUsers(e,i,t,s=0,a=20){let g=new M().set("page",s.toString()).set("size",a.toString());return e&&(g=g.set("query",e)),i&&(g=g.set("role",i)),t&&(g=g.set("status",t)),this.http.get(`${this.apiUrl}/search`,{params:g})}getUsersByRole(e,i=0,t=20){let s=new M().set("page",i.toString()).set("size",t.toString());return this.http.get(`${this.apiUrl}/role/${e}`,{params:s})}getAllUsers(e=0,i=20){let t=new M().set("page",e.toString()).set("size",i.toString());return this.http.get(this.apiUrl,{params:t})}deactivateUser(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(i){return new(i||l)(E(V))}}static{this.\u0275prov=w({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})();function H(l,u){if(l&1){let e=y();n(0,"div",24),f("click",function(){m(e);let t=O(2);return c(t.click())})("dragover",function(t){m(e);let s=_();return c(s.onDragOver(t))})("drop",function(t){m(e);let s=_();return c(s.onDrop(t))}),n(1,"input",25,0),f("change",function(t){m(e);let s=_();return c(s.onFileSelected(t))}),o(),n(3,"div",26),r(4,"\u{1F4C4}"),o(),n(5,"p",27),r(6,"Drag and drop your resume here or click to browse"),o(),n(7,"p",28),r(8,"Supported formats: PDF, DOC, DOCX (Max 5MB)"),o()()}}function X(l,u){if(l&1){let e=y();n(0,"div",29)(1,"div",30)(2,"span",31),r(3,"\u{1F4C4}"),o(),n(4,"div",32)(5,"strong"),r(6),o(),n(7,"span",33),r(8),o()()(),n(9,"div",34)(10,"button",35),r(11,"\u2B07\uFE0F"),o(),n(12,"button",36),f("click",function(){m(e);let t=O(17);return c(t.click())}),r(13,"\u{1F504}"),o(),n(14,"button",37),f("click",function(){m(e);let t=_();return c(t.deleteResume())}),r(15,"\u{1F5D1}\uFE0F"),o()(),n(16,"input",25,0),f("change",function(t){m(e);let s=_();return c(s.onFileSelected(t))}),o()()}if(l&2){let e=_();d(6),h(e.profile.resume.name),d(2),v("",e.profile.resume.size," \u2022 Uploaded ",e.profile.resume.uploadedDate,"")}}function q(l,u){if(l&1&&(n(0,"span",38),r(1),n(2,"button",39),r(3,"\xD7"),o()()),l&2){let e=u.$implicit;d(),F("",e," ")}}function K(l,u){if(l&1&&(n(0,"div",40)(1,"h3"),r(2),o(),n(3,"div",41),r(4),o(),n(5,"p"),r(6),o()()),l&2){let e=u.$implicit;d(2),h(e.title),d(2),v("",e.company," \u2022 ",e.duration,""),d(2),h(e.description)}}function G(l,u){if(l&1&&(n(0,"div",42)(1,"h3"),r(2),o(),n(3,"div",43),r(4),o()()),l&2){let e=u.$implicit;d(2),h(e.degree),d(2),v("",e.school," \u2022 ",e.year,"")}}var ne=(()=>{class l{constructor(e,i){this.userService=e,this.authService=i,this.profile={name:"",email:"",phone:"",location:"",summary:"",resume:null,skills:[],experience:[],education:[]},this.loading=!1,this.error="",this.user=null}ngOnInit(){this.loadProfile()}loadProfile(){this.loading=!0,this.error="",this.authService.getCurrentUser().subscribe({next:e=>{if(!e?.id){this.error="User not authenticated",this.loading=!1;return}this.userService.getUserProfile(e.id).subscribe({next:i=>{this.user=i,this.profile={name:`${i.firstName} ${i.lastName}`,email:i.email,phone:i.phoneNumber||"",location:i.location||"",summary:i.experience||"",resume:null,skills:i.skills||[],experience:[],education:[]},this.loading=!1},error:i=>{console.error("Error loading profile:",i),this.error="Failed to load profile",this.loading=!1}})},error:e=>{console.error("Error getting current user:",e),this.error="Authentication error",this.loading=!1}})}saveProfile(){if(!this.user)return;this.loading=!0;let[e,...i]=this.profile.name.split(" "),t=i.join(" "),s={firstName:e,lastName:t,phoneNumber:this.profile.phone,location:this.profile.location,experience:this.profile.summary,skills:this.profile.skills};this.userService.updateUser(this.user.id,s).subscribe({next:a=>{this.user=a,this.loading=!1,alert("Profile updated successfully!")},error:a=>{console.error("Error updating profile:",a),this.error="Failed to update profile",this.loading=!1}})}onDragOver(e){e.preventDefault(),e.stopPropagation()}onDrop(e){e.preventDefault(),e.stopPropagation();let i=e.dataTransfer?.files;i&&i.length>0&&this.handleFile(i[0])}onFileSelected(e){let i=e.target.files[0];i&&this.handleFile(i)}handleFile(e){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(e.type)){alert("Please upload a PDF, DOC, or DOCX file.");return}if(e.size>5242880){alert("File size must be less than 5MB.");return}this.profile.resume={name:e.name,size:this.formatFileSize(e.size),uploadedDate:"Today",file:e}}formatFileSize(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}deleteResume(){confirm("Are you sure you want to delete your resume?")&&(this.profile.resume=null)}static{this.\u0275fac=function(i){return new(i||l)(S(L),S(W))}}static{this.\u0275cmp=k({type:l,selectors:[["app-candidate-profile"]],standalone:!0,features:[z],decls:60,vars:14,consts:[["fileInput",""],[1,"candidate-profile-page"],[1,"page-header"],[1,"profile-container"],[1,"profile-section"],[1,"resume-upload-container"],["class","upload-area",3,"click","dragover","drop",4,"ngIf"],["class","resume-preview",4,"ngIf"],[1,"form-grid"],[1,"form-group"],["type","text",1,"form-input",3,"ngModelChange","ngModel","disabled"],["type","email",1,"form-input",3,"ngModelChange","ngModel"],["type","tel",1,"form-input",3,"ngModelChange","ngModel"],["type","text",1,"form-input",3,"ngModelChange","ngModel"],["rows","4",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"skills-container"],["class","skill-tag",4,"ngFor","ngForOf"],["type","text","placeholder","Add skill...",1,"skill-input"],["class","experience-item",4,"ngFor","ngForOf"],[1,"btn-add"],["class","education-item",4,"ngFor","ngForOf"],[1,"profile-actions"],[1,"btn-save",3,"click","disabled"],[1,"btn-cancel",3,"click","disabled"],[1,"upload-area",3,"click","dragover","drop"],["type","file","accept",".pdf,.doc,.docx","hidden","",3,"change"],[1,"upload-icon"],[1,"upload-text"],[1,"upload-hint"],[1,"resume-preview"],[1,"resume-info"],[1,"file-icon"],[1,"file-details"],[1,"file-meta"],[1,"resume-actions"],["title","Download",1,"btn-icon"],["title","Replace",1,"btn-icon",3,"click"],["title","Delete",1,"btn-icon",3,"click"],[1,"skill-tag"],[1,"remove-btn"],[1,"experience-item"],[1,"exp-company"],[1,"education-item"],[1,"edu-school"]],template:function(i,t){i&1&&(n(0,"div",1)(1,"div",2)(2,"h1"),r(3,"My Profile"),o(),n(4,"p"),r(5,"Manage your professional information"),o()(),n(6,"div",3)(7,"div",4)(8,"h2"),r(9,"Resume"),o(),n(10,"div",5),P(11,H,9,0,"div",6)(12,X,18,3,"div",7),o()(),n(13,"div",4)(14,"h2"),r(15,"Personal Information"),o(),n(16,"div",8)(17,"div",9)(18,"label"),r(19,"Full Name"),o(),n(20,"input",10),b("ngModelChange",function(a){return x(t.profile.name,a)||(t.profile.name=a),a}),o()(),n(21,"div",9)(22,"label"),r(23,"Email"),o(),n(24,"input",11),b("ngModelChange",function(a){return x(t.profile.email,a)||(t.profile.email=a),a}),o()(),n(25,"div",9)(26,"label"),r(27,"Phone"),o(),n(28,"input",12),b("ngModelChange",function(a){return x(t.profile.phone,a)||(t.profile.phone=a),a}),o()(),n(29,"div",9)(30,"label"),r(31,"Location"),o(),n(32,"input",13),b("ngModelChange",function(a){return x(t.profile.location,a)||(t.profile.location=a),a}),o()()()(),n(33,"div",4)(34,"h2"),r(35,"Professional Summary"),o(),n(36,"textarea",14),b("ngModelChange",function(a){return x(t.profile.summary,a)||(t.profile.summary=a),a}),o()(),n(37,"div",4)(38,"h2"),r(39,"Skills"),o(),n(40,"div",15),P(41,q,4,1,"span",16),D(42,"input",17),o()(),n(43,"div",4)(44,"h2"),r(45,"Experience"),o(),P(46,K,7,4,"div",18),n(47,"button",19),r(48,"+ Add Experience"),o()(),n(49,"div",4)(50,"h2"),r(51,"Education"),o(),P(52,G,5,3,"div",20),n(53,"button",19),r(54,"+ Add Education"),o()(),n(55,"div",21)(56,"button",22),f("click",function(){return t.saveProfile()}),r(57),o(),n(58,"button",23),f("click",function(){return t.loadProfile()}),r(59,"Cancel"),o()()()()),i&2&&(d(11),p("ngIf",!t.profile.resume),d(),p("ngIf",t.profile.resume),d(8),C("ngModel",t.profile.name),p("disabled",t.loading),d(4),C("ngModel",t.profile.email),d(4),C("ngModel",t.profile.phone),d(4),C("ngModel",t.profile.location),d(4),C("ngModel",t.profile.summary),d(5),p("ngForOf",t.profile.skills),d(5),p("ngForOf",t.profile.experience),d(6),p("ngForOf",t.profile.education),d(4),p("disabled",t.loading),d(),h(t.loading?"Saving...":"Save Changes"),d(),p("disabled",t.loading))},dependencies:[U,I,T,j,B,N,A],styles:[".candidate-profile-page[_ngcontent-%COMP%]{padding:2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b}.profile-container[_ngcontent-%COMP%]{max-width:900px}.profile-section[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:2rem;margin-bottom:1.5rem}.profile-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#0f172a;margin-bottom:1.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#475569;margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem}.form-textarea[_ngcontent-%COMP%]{resize:vertical}.skills-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.skill-tag[_ngcontent-%COMP%]{background:#e0e7ff;color:#3730a3;padding:6px 12px;border-radius:20px;font-size:.875rem;display:flex;align-items:center;gap:.5rem}.remove-btn[_ngcontent-%COMP%]{background:none;border:none;color:#3730a3;font-size:1.25rem;cursor:pointer;padding:0;line-height:1}.skill-input[_ngcontent-%COMP%]{border:1px dashed #cbd5e1;padding:6px 12px;border-radius:20px;font-size:.875rem}.experience-item[_ngcontent-%COMP%], .education-item[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid #f1f5f9}.experience-item[_ngcontent-%COMP%]:last-of-type, .education-item[_ngcontent-%COMP%]:last-of-type{border-bottom:none;margin-bottom:1rem}.experience-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .education-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#0f172a;margin-bottom:.25rem}.exp-company[_ngcontent-%COMP%], .edu-school[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin-bottom:.5rem}.experience-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#475569;font-size:.875rem;line-height:1.5}.btn-add[_ngcontent-%COMP%]{background:#fff;color:#06f;border:1px dashed #0066ff;padding:10px 20px;border-radius:8px;font-weight:600;cursor:pointer}.profile-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.btn-save[_ngcontent-%COMP%]{background:#06f;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer}.resume-upload-container[_ngcontent-%COMP%]{margin-top:1rem}.upload-area[_ngcontent-%COMP%]{border:2px dashed #cbd5e1;border-radius:12px;padding:3rem 2rem;text-align:center;cursor:pointer;transition:all .2s}.upload-area[_ngcontent-%COMP%]:hover{border-color:#06f;background:#f8fafc}.upload-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.upload-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#0f172a;margin-bottom:.5rem}.upload-hint[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b}.resume-preview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;background:#f8fafc;border:1px solid #e2e8f0;border-radius:12px}.resume-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1}.file-icon[_ngcontent-%COMP%]{font-size:2rem}.file-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#0f172a;margin-bottom:.25rem}.file-meta[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b}.resume-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-icon[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;padding:8px 12px;border-radius:6px;font-size:1rem;cursor:pointer;transition:all .2s}.btn-icon[_ngcontent-%COMP%]:hover{background:#f1f5f9}"]})}}return l})();export{ne as CandidateProfileComponent};
