import{a as R}from"./chunk-F5EO3EHY.js";import{a as B}from"./chunk-W354DRU4.js";import{f as F,h as z,l as N,m as L,n as j,q as $}from"./chunk-YXQLQ2ZV.js";import"./chunk-WIHTSVPG.js";import{$b as n,Bb as d,Cb as E,Da as g,Db as w,Ea as _,Jb as t,Kb as i,Nb as u,Oc as T,Pc as D,Qb as m,Rc as W,Sb as c,Tc as V,ac as p,bc as P,db as O,dc as S,ec as y,fc as A,gb as o,gc as k,hb as b,ic as I,mc as x,nc as C,ua as M,zb as v}from"./chunk-EGDJTDOV.js";function J(a,s){if(a&1){let e=u();t(0,"tr")(1,"td")(2,"strong"),n(3),i()(),t(4,"td"),n(5),i(),t(6,"td"),n(7),x(8,"date"),i(),t(9,"td")(10,"span",14),n(11),i()(),t(12,"td")(13,"button",15),m("click",function(){let r=g(e).$implicit,f=c();return _(f.viewDetails(r))}),n(14,"View Details"),i(),t(15,"button",16),m("click",function(){let r=g(e).$implicit,f=c();return _(f.withdrawApplication(r))}),n(16,"Withdraw"),i()()()}if(a&2){let e=s.$implicit;o(3),p(e.jobTitle||"Job Title"),o(2),p(e.companyName||"Company"),o(2),p(C(8,7,e.appliedAt,"MMM d, y")),o(3),w(e.status.toLowerCase()),o(),p(e.status),o(4),d("disabled",e.status==="WITHDRAWN"||e.status==="REJECTED"||e.status==="OFFER_ACCEPTED")}}function U(a,s){if(a&1){let e=u();t(0,"button",17),m("click",function(){let r=g(e).$implicit,f=c();return _(f.goToPage(r))}),n(1),i()}if(a&2){let e=s.$implicit,l=c();E("active",e===l.currentPage),o(),p(e)}}function H(a,s){if(a&1&&(t(0,"div",28)(1,"label"),n(2,"Cover Letter:"),i(),t(3,"p",29),n(4),i()()),a&2){let e=c(2);o(4),p(e.selectedApp.coverLetter)}}function q(a,s){if(a&1&&(t(0,"div",37)(1,"strong"),n(2,"\u23F1\uFE0F Duration:"),i(),t(3,"span"),n(4),i()()),a&2){let e=c().$implicit;o(4),P("",e.durationMinutes," minutes")}}function G(a,s){if(a&1&&(t(0,"div",37)(1,"strong"),n(2,"\u{1F517} Meeting Link:"),i(),t(3,"a",41),n(4,"Join Meeting"),i()()),a&2){let e=c().$implicit;o(3),d("href",e.meetingLink,O)}}function K(a,s){if(a&1&&(t(0,"div",37)(1,"strong"),n(2,"\u{1F4CD} Location:"),i(),t(3,"span"),n(4),i()()),a&2){let e=c().$implicit;o(4),p(e.location)}}function Q(a,s){if(a&1&&(t(0,"span"),n(1),i()),a&2){let e=c(2).$implicit;o(),P(" (",e.interviewerEmail,")")}}function X(a,s){if(a&1&&(t(0,"div",37)(1,"strong"),n(2,"\u{1F464} Interviewer:"),i(),t(3,"span"),n(4),v(5,Q,2,1,"span",42),i()()),a&2){let e=c().$implicit;o(4),p(e.interviewerName),o(),d("ngIf",e.interviewerEmail)}}function Y(a,s){if(a&1&&(t(0,"div",43)(1,"strong"),n(2,"\u{1F4DD} Notes:"),i(),t(3,"p"),n(4),i()()),a&2){let e=c().$implicit;o(4),p(e.notes)}}function Z(a,s){a&1&&(t(0,"div",44)(1,"button",45),n(2,"Request Reschedule"),i()()),a&2&&(o(),d("disabled",!0))}function ee(a,s){if(a&1&&(t(0,"div",32)(1,"div",33)(2,"span",34),n(3),i(),t(4,"span",35),n(5),i()(),t(6,"div",36)(7,"div",37)(8,"strong"),n(9,"\u{1F4C5} Date & Time:"),i(),t(10,"span"),n(11),x(12,"date"),i()(),v(13,q,5,1,"div",38)(14,G,5,1,"div",38)(15,K,5,1,"div",38)(16,X,6,2,"div",38)(17,Y,5,1,"div",39),i(),v(18,Z,3,1,"div",40),i()),a&2){let e=s.$implicit;o(3),p(e.interviewType.replace("_"," ")),o(),w(e.status.toLowerCase()),o(),p(e.status),o(6),p(C(12,11,e.scheduledAt,"EEEE, MMM d, y, h:mm a")),o(2),d("ngIf",e.durationMinutes),o(),d("ngIf",e.meetingLink),o(),d("ngIf",e.location),o(),d("ngIf",e.interviewerName),o(),d("ngIf",e.notes),o(),d("ngIf",e.status==="SCHEDULED")}}function te(a,s){if(a&1&&(t(0,"div",30)(1,"h3"),n(2,"Scheduled Interviews"),i(),v(3,ee,19,14,"div",31),i()),a&2){let e=c(2);o(3),d("ngForOf",e.interviews)}}function ie(a,s){if(a&1){let e=u();t(0,"div",18),m("click",function(){g(e);let r=c();return _(r.closeDetails())}),t(1,"div",19),m("click",function(r){return g(e),_(r.stopPropagation())}),t(2,"div",20)(3,"h2"),n(4,"Application Details"),i(),t(5,"button",21),m("click",function(){g(e);let r=c();return _(r.closeDetails())}),n(6,"\xD7"),i()(),t(7,"div",22)(8,"div",23)(9,"label"),n(10,"Position:"),i(),t(11,"span"),n(12),i()(),t(13,"div",23)(14,"label"),n(15,"Company:"),i(),t(16,"span"),n(17),i()(),t(18,"div",23)(19,"label"),n(20,"Status:"),i(),t(21,"span",14),n(22),i()(),t(23,"div",23)(24,"label"),n(25,"Applied Date:"),i(),t(26,"span"),n(27),x(28,"date"),i()(),t(29,"div",23)(30,"label"),n(31,"Last Updated:"),i(),t(32,"span"),n(33),x(34,"date"),i()(),v(35,H,5,1,"div",24)(36,te,4,1,"div",25),i(),t(37,"div",26)(38,"button",27),m("click",function(){g(e);let r=c();return _(r.closeDetails())}),n(39,"Close"),i()()()()}if(a&2){let e=c();o(12),p(e.selectedApp.jobTitle),o(5),p(e.selectedApp.companyName),o(4),w(e.selectedApp.status.toLowerCase()),o(),p(e.selectedApp.status),o(5),p(C(28,9,e.selectedApp.appliedAt,"MMM d, y, h:mm a")),o(6),p(C(34,12,e.selectedApp.updatedAt,"MMM d, y, h:mm a")),o(2),d("ngIf",e.selectedApp.coverLetter),o(),d("ngIf",e.interviews.length>0)}}function ne(a,s){if(a&1){let e=u();t(0,"div",18),m("click",function(){g(e);let r=c();return _(r.cancelWithdraw())}),t(1,"div",46),m("click",function(r){return g(e),_(r.stopPropagation())}),t(2,"div",20)(3,"h2"),n(4,"Withdraw Application"),i(),t(5,"button",21),m("click",function(){g(e);let r=c();return _(r.cancelWithdraw())}),n(6,"\xD7"),i()(),t(7,"div",22)(8,"p"),n(9,"Are you sure you want to withdraw your application for "),t(10,"strong"),n(11),i(),n(12," at "),t(13,"strong"),n(14),i(),n(15,"?"),i(),t(16,"p",47),n(17,"This action cannot be undone and the application will be removed from your list."),i()(),t(18,"div",26)(19,"button",27),m("click",function(){g(e);let r=c();return _(r.cancelWithdraw())}),n(20,"Cancel"),i(),t(21,"button",48),m("click",function(){g(e);let r=c();return _(r.confirmWithdraw())}),n(22,"Withdraw Application"),i()()()()}if(a&2){let e=c();o(11),p(e.appToWithdraw==null?null:e.appToWithdraw.jobTitle),o(3),p(e.appToWithdraw==null?null:e.appToWithdraw.companyName)}}var se=(()=>{class a{constructor(e,l){this.applicationService=e,this.interviewService=l,this.currentPage=1,this.itemsPerPage=25,this.applications=[],this.loading=!1,this.error="",this.totalApplications=0,this.totalPages=0,this.selectedApp=null,this.showWithdrawConfirm=!1,this.appToWithdraw=null,this.interviews=[],this.loadingInterviews=!1}ngOnInit(){this.loadApplications()}loadApplications(){this.loading=!0,this.error="";let e=this.currentPage-1;this.applicationService.getMyApplications(e,this.itemsPerPage).subscribe({next:l=>{this.applications=l.content,this.totalApplications=l.totalElements,this.totalPages=l.totalPages,this.loading=!1},error:l=>{console.error("Error loading applications:",l),this.error="Failed to load applications",this.loading=!1}})}get startIndex(){return(this.currentPage-1)*this.itemsPerPage}get endIndex(){return Math.min(this.startIndex+this.itemsPerPage,this.totalApplications)}get paginatedApplications(){return this.applications}get pageNumbers(){let e=[];for(let l=1;l<=this.totalPages;l++)e.push(l);return e}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadApplications())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadApplications())}goToPage(e){this.currentPage=e,this.loadApplications()}onItemsPerPageChange(){this.currentPage=1,this.loadApplications()}viewDetails(e){this.selectedApp=e,this.loadInterviews(e.id)}loadInterviews(e){this.loadingInterviews=!0,this.interviews=[],console.log("Loading interviews for application:",e),this.interviewService.getInterviewsByApplication(e).subscribe({next:l=>{console.log("Interviews loaded:",l),this.interviews=l,this.loadingInterviews=!1},error:l=>{console.error("Error loading interviews:",l),this.loadingInterviews=!1}})}closeDetails(){this.selectedApp=null,this.interviews=[]}withdrawApplication(e){this.appToWithdraw=e,this.showWithdrawConfirm=!0}cancelWithdraw(){this.showWithdrawConfirm=!1,this.appToWithdraw=null}confirmWithdraw(){this.appToWithdraw&&this.applicationService.withdrawApplication(this.appToWithdraw.id).subscribe({next:()=>{this.showWithdrawConfirm=!1,this.appToWithdraw=null,this.loadApplications()},error:e=>{console.error("Error withdrawing application:",e),this.showWithdrawConfirm=!1,this.appToWithdraw=null}})}static{this.\u0275fac=function(l){return new(l||a)(b(B),b(R))}}static{this.\u0275cmp=M({type:a,selectors:[["app-candidate-applications"]],standalone:!0,features:[I],decls:41,vars:13,consts:[[1,"candidate-applications-page"],[1,"page-header"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"pagination"],[1,"pagination-left"],[1,"pagination-info"],[1,"items-per-page",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"pagination-controls"],[1,"btn-page",3,"click","disabled"],["class","btn-page",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"badge"],[1,"btn-action",3,"click"],[1,"btn-action","secondary",3,"click","disabled"],[1,"btn-page",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[1,"detail-row"],["class","detail-row full-width",4,"ngIf"],["class","interview-section",4,"ngIf"],[1,"modal-footer"],[1,"btn-action","secondary",3,"click"],[1,"detail-row","full-width"],[1,"cover-letter"],[1,"interview-section"],["class","interview-card",4,"ngFor","ngForOf"],[1,"interview-card"],[1,"interview-header"],[1,"interview-type"],[1,"interview-status"],[1,"interview-details"],[1,"interview-row"],["class","interview-row",4,"ngIf"],["class","interview-row full",4,"ngIf"],["class","interview-actions",4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"meeting-link",3,"href"],[4,"ngIf"],[1,"interview-row","full"],[1,"interview-actions"],["title","Coming soon",1,"btn-action",3,"disabled"],[1,"modal-content","small",3,"click"],[1,"warning"],[1,"btn-action","danger",3,"click"]],template:function(l,r){l&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),n(3,"My Applications"),i(),t(4,"p"),n(5,"Track your job applications"),i()(),t(6,"div",2)(7,"table",3)(8,"thead")(9,"tr")(10,"th"),n(11,"Position"),i(),t(12,"th"),n(13,"Company"),i(),t(14,"th"),n(15,"Applied Date"),i(),t(16,"th"),n(17,"Status"),i(),t(18,"th"),n(19,"Actions"),i()()(),t(20,"tbody"),v(21,J,17,10,"tr",4),i()()(),t(22,"div",5)(23,"div",6)(24,"div",7),n(25),i(),t(26,"select",8),k("ngModelChange",function(h){return A(r.itemsPerPage,h)||(r.itemsPerPage=h),h}),m("change",function(){return r.onItemsPerPageChange()}),t(27,"option",9),n(28,"25 per page"),i(),t(29,"option",9),n(30,"50 per page"),i(),t(31,"option",9),n(32,"100 per page"),i()()(),t(33,"div",10)(34,"button",11),m("click",function(){return r.previousPage()}),n(35,"Previous"),i(),v(36,U,2,3,"button",12),t(37,"button",11),m("click",function(){return r.nextPage()}),n(38,"Next"),i()()()(),v(39,ie,40,15,"div",13)(40,ne,23,2,"div",13)),l&2&&(o(21),d("ngForOf",r.paginatedApplications),o(4),S("Showing ",r.startIndex+1,"-",r.endIndex," of ",r.totalApplications,""),o(),y("ngModel",r.itemsPerPage),o(),d("value",25),o(2),d("value",50),o(2),d("value",100),o(3),d("disabled",r.currentPage===1),o(2),d("ngForOf",r.pageNumbers),o(),d("disabled",r.currentPage===r.totalPages),o(2),d("ngIf",r.selectedApp),o(),d("ngIf",r.showWithdrawConfirm))},dependencies:[V,T,D,W,$,L,j,N,F,z],styles:[".candidate-applications-page[_ngcontent-%COMP%]{padding:2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;overflow-x:auto;margin-bottom:1rem}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:2px solid #e2e8f0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:left;font-weight:600;font-size:.875rem;color:#475569}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f5f9}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;font-size:.875rem;color:#0f172a}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:.75rem;font-weight:600}.badge.applied[_ngcontent-%COMP%]{background:#e0e7ff;color:#3730a3}.badge.review[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.badge.interview[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.badge.offer[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.badge.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.btn-action[_ngcontent-%COMP%]{background:#06f;color:#fff;border:none;padding:6px 12px;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;margin-right:8px;white-space:nowrap}.btn-action.secondary[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0}.btn-action.danger[_ngcontent-%COMP%]{background:#dc2626}.btn-action[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e2e8f0}.pagination-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.pagination-info[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.items-per-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:.875rem;color:#64748b;background:#fff;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-page[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:6px 12px;border-radius:6px;font-size:.875rem;cursor:pointer}.btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc}.btn-page.active[_ngcontent-%COMP%]{background:#06f;color:#fff;border-color:#06f}.btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 25px -5px #0000001a}.modal-content.small[_ngcontent-%COMP%]{max-width:450px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e2e8f0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0f172a;margin:0}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:2rem;color:#64748b;cursor:pointer;line-height:1;padding:0;width:32px;height:32px}.btn-close[_ngcontent-%COMP%]:hover{color:#0f172a}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.detail-row[_ngcontent-%COMP%]{display:flex;margin-bottom:1rem}.detail-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#475569;min-width:140px}.detail-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#0f172a}.detail-row.full-width[_ngcontent-%COMP%]{flex-direction:column}.detail-row.full-width[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem}.cover-letter[_ngcontent-%COMP%]{color:#0f172a;white-space:pre-wrap;line-height:1.6;margin:0}.interview-section[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid #e2e8f0}.interview-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#0f172a;margin-bottom:1rem}.interview-card[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:1rem;margin-bottom:1rem}.interview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.interview-type[_ngcontent-%COMP%]{font-weight:600;color:#0f172a;text-transform:capitalize}.interview-status[_ngcontent-%COMP%]{padding:2px 8px;border-radius:8px;font-size:.75rem;font-weight:600}.interview-status.scheduled[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.interview-status.completed[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.interview-status.cancelled[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.interview-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.interview-row[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.875rem;align-items:flex-start}.interview-row.full[_ngcontent-%COMP%]{flex-direction:column}.interview-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#475569;min-width:140px;flex-shrink:0}.interview-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .interview-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0f172a;margin:0;flex:1}.meeting-link[_ngcontent-%COMP%]{color:#06f;text-decoration:none;font-weight:600;padding:4px 12px;background:#eff6ff;border-radius:6px;display:inline-block}.meeting-link[_ngcontent-%COMP%]:hover{background:#dbeafe;text-decoration:none}.interview-actions[_ngcontent-%COMP%]{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #e2e8f0;display:flex;gap:.5rem}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#475569;line-height:1.6;margin-bottom:1rem}.modal-body[_ngcontent-%COMP%]   p.warning[_ngcontent-%COMP%]{color:#dc2626;font-size:.875rem}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1.5rem;border-top:1px solid #e2e8f0}"]})}}return a})();export{se as CandidateApplicationsComponent};
