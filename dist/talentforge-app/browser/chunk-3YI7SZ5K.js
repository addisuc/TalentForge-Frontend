import{a as D}from"./chunk-F5EO3EHY.js";import{c as T,f as V,h as z,l as F,m as N,n as q,q as L}from"./chunk-YXQLQ2ZV.js";import"./chunk-WIHTSVPG.js";import{$b as o,Bb as p,Cb as I,Da as m,Db as y,Ea as g,Jb as t,Kb as n,Nb as b,Oc as S,Pc as E,Qb as c,Sb as d,Tc as R,ac as u,bc as x,dc as k,ec as v,fc as C,gb as r,gc as w,hb as M,ic as O,ua as P,zb as _}from"./chunk-EGDJTDOV.js";function j(l,f){if(l&1){let e=b();t(0,"button",18),c("click",function(){m(e);let i=d().$implicit,s=d();return g(s.joinInterview(i))}),o(1,"Join"),n()}}function W(l,f){if(l&1){let e=b();t(0,"button",19),c("click",function(){m(e);let i=d().$implicit,s=d();return g(s.requestReschedule(i))}),o(1,"Request Reschedule"),n()}}function A(l,f){if(l&1&&(t(0,"tr")(1,"td")(2,"strong"),o(3),n()(),t(4,"td"),o(5),n(),t(6,"td"),o(7),n(),t(8,"td"),o(9),n(),t(10,"td")(11,"span",14),o(12),n()(),t(13,"td"),_(14,j,2,0,"button",15),t(15,"button",16),o(16,"Details"),n(),_(17,W,2,0,"button",17),n()()),l&2){let e=f.$implicit;r(3),u(e.position),r(2),u(e.company),r(2),u(e.datetime),r(2),u(e.type),r(2),y(e.status.toLowerCase()),r(),u(e.status),r(2),p("ngIf",e.status==="Scheduled"&&e.meetingLink),r(3),p("ngIf",e.status==="Scheduled")}}function B(l,f){if(l&1){let e=b();t(0,"button",20),c("click",function(){let i=m(e).$implicit,s=d();return g(s.goToPage(i))}),o(1),n()}if(l&2){let e=f.$implicit,a=d();I("active",e===a.currentPage),r(),u(e)}}function U(l,f){if(l&1){let e=b();t(0,"div",21),c("click",function(){m(e);let i=d();return g(i.showRescheduleModal=!1)}),t(1,"div",22),c("click",function(i){return m(e),g(i.stopPropagation())}),t(2,"div",23)(3,"h2"),o(4,"Request Reschedule"),n(),t(5,"button",24),c("click",function(){m(e);let i=d();return g(i.showRescheduleModal=!1)}),o(6,"\u2715"),n()(),t(7,"div",25)(8,"p")(9,"strong"),o(10),n(),o(11),n(),t(12,"p"),o(13),n(),t(14,"div",26)(15,"label"),o(16,"Reason for Reschedule"),n(),t(17,"textarea",27),w("ngModelChange",function(i){m(e);let s=d();return C(s.rescheduleReason,i)||(s.rescheduleReason=i),g(i)}),n()()(),t(18,"div",28)(19,"button",29),c("click",function(){m(e);let i=d();return g(i.showRescheduleModal=!1)}),o(20,"Cancel"),n(),t(21,"button",30),c("click",function(){m(e);let i=d();return g(i.submitReschedule())}),o(22,"Submit Request"),n()()()()}if(l&2){let e=d();r(10),u(e.selectedInterview==null?null:e.selectedInterview.position),r(),x(" at ",e.selectedInterview==null?null:e.selectedInterview.company,""),r(2),x("Current: ",e.selectedInterview==null?null:e.selectedInterview.datetime,""),r(4),v("ngModel",e.rescheduleReason)}}var X=(()=>{class l{constructor(e){this.interviewService=e,this.currentPage=1,this.itemsPerPage=25,this.interviews=[],this.loading=!1,this.error="",this.showRescheduleModal=!1,this.selectedInterview=null,this.rescheduleReason=""}ngOnInit(){this.loadInterviews()}loadInterviews(){this.loading=!0,this.error="",this.interviewService.getUpcomingInterviews(90).subscribe({next:e=>{this.interviews=e.map(a=>this.mapInterviewToDisplay(a)),this.loading=!1},error:e=>{console.error("Error loading interviews:",e),this.error="Failed to load interviews",this.loading=!1}})}mapInterviewToDisplay(e){return{id:e.id,position:e.interviewType,company:e.interviewerName||"Company",datetime:new Date(e.scheduledAt).toLocaleString(),type:e.meetingPlatform||"Not specified",status:e.status,meetingLink:e.meetingLink}}get totalInterviews(){return this.interviews.length}get totalPages(){return Math.ceil(this.totalInterviews/this.itemsPerPage)}get startIndex(){return(this.currentPage-1)*this.itemsPerPage}get endIndex(){return Math.min(this.startIndex+this.itemsPerPage,this.totalInterviews)}get paginatedInterviews(){return this.interviews.slice(this.startIndex,this.endIndex)}get pageNumbers(){let e=[];for(let a=1;a<=this.totalPages;a++)e.push(a);return e}previousPage(){this.currentPage>1&&this.currentPage--}nextPage(){this.currentPage<this.totalPages&&this.currentPage++}goToPage(e){this.currentPage=e}onItemsPerPageChange(){this.currentPage=1}joinInterview(e){e.meetingLink&&window.open(e.meetingLink,"_blank")}requestReschedule(e){this.selectedInterview=e,this.rescheduleReason="",this.showRescheduleModal=!0}submitReschedule(){if(!this.rescheduleReason.trim()){alert("Please provide a reason for rescheduling");return}let e={reason:this.rescheduleReason};this.interviewService.requestReschedule(this.selectedInterview.id,e).subscribe({next:()=>{alert(`Reschedule request submitted for ${this.selectedInterview.position}`),this.showRescheduleModal=!1,this.loadInterviews()},error:a=>{console.error("Error requesting reschedule:",a),alert("Failed to submit reschedule request")}})}static{this.\u0275fac=function(a){return new(a||l)(M(D))}}static{this.\u0275cmp=P({type:l,selectors:[["app-candidate-interviews"]],standalone:!0,features:[O],decls:42,vars:12,consts:[[1,"candidate-interviews-page"],[1,"page-header"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"pagination"],[1,"pagination-left"],[1,"pagination-info"],[1,"items-per-page",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"pagination-controls"],[1,"btn-page",3,"click","disabled"],["class","btn-page",3,"active","click",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"badge"],["class","btn-action",3,"click",4,"ngIf"],[1,"btn-action","secondary"],["class","btn-action secondary",3,"click",4,"ngIf"],[1,"btn-action",3,"click"],[1,"btn-action","secondary",3,"click"],[1,"btn-page",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["rows","3","placeholder","Please explain why you need to reschedule...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"btn-primary",3,"click"]],template:function(a,i){a&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),o(3,"My Interviews"),n(),t(4,"p"),o(5,"Upcoming and past interview schedule"),n()(),t(6,"div",2)(7,"table",3)(8,"thead")(9,"tr")(10,"th"),o(11,"Position"),n(),t(12,"th"),o(13,"Company"),n(),t(14,"th"),o(15,"Date & Time"),n(),t(16,"th"),o(17,"Type"),n(),t(18,"th"),o(19,"Status"),n(),t(20,"th"),o(21,"Actions"),n()()(),t(22,"tbody"),_(23,A,18,9,"tr",4),n()()(),t(24,"div",5)(25,"div",6)(26,"div",7),o(27),n(),t(28,"select",8),w("ngModelChange",function(h){return C(i.itemsPerPage,h)||(i.itemsPerPage=h),h}),c("change",function(){return i.onItemsPerPageChange()}),t(29,"option",9),o(30,"25 per page"),n(),t(31,"option",9),o(32,"50 per page"),n(),t(33,"option",9),o(34,"100 per page"),n()()(),t(35,"div",10)(36,"button",11),c("click",function(){return i.previousPage()}),o(37,"Previous"),n(),_(38,B,2,3,"button",12),t(39,"button",11),c("click",function(){return i.nextPage()}),o(40,"Next"),n()()(),_(41,U,23,4,"div",13),n()),a&2&&(r(23),p("ngForOf",i.paginatedInterviews),r(4),k("Showing ",i.startIndex+1,"-",i.endIndex," of ",i.totalInterviews,""),r(),v("ngModel",i.itemsPerPage),r(),p("value",25),r(2),p("value",50),r(2),p("value",100),r(3),p("disabled",i.currentPage===1),r(2),p("ngForOf",i.pageNumbers),r(),p("disabled",i.currentPage===i.totalPages),r(2),p("ngIf",i.showRescheduleModal))},dependencies:[R,S,E,L,N,q,T,F,V,z],styles:[".candidate-interviews-page[_ngcontent-%COMP%]{padding:2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;overflow-x:auto;margin-bottom:1rem}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:2px solid #e2e8f0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:left;font-weight:600;font-size:.875rem;color:#475569}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f5f9}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;font-size:.875rem;color:#0f172a}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:.75rem;font-weight:600}.badge.scheduled[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.badge.completed[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.badge.cancelled[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.btn-action[_ngcontent-%COMP%]{background:#06f;color:#fff;border:none;padding:6px 12px;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;margin-right:8px;white-space:nowrap}.btn-action.secondary[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e2e8f0}.pagination-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.pagination-info[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.items-per-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:.875rem;color:#64748b;background:#fff;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-page[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:6px 12px;border-radius:6px;font-size:.875rem;cursor:pointer}.btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc}.btn-page.active[_ngcontent-%COMP%]{background:#06f;color:#fff;border-color:#06f}.btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;box-shadow:0 20px 25px -5px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e2e8f0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#0f172a;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#64748b;cursor:pointer;padding:0;width:32px;height:32px}.modal-body[_ngcontent-%COMP%]{padding:1.5rem}.modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;color:#475569}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:600;color:#0f172a;margin-bottom:.5rem;font-size:.875rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem;font-family:inherit}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:1.5rem;border-top:1px solid #e2e8f0}.btn-primary[_ngcontent-%COMP%]{background:#06f;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;font-size:.875rem}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:.75rem 1.5rem;border-radius:8px;font-weight:600;cursor:pointer;font-size:.875rem}"]})}}return l})();export{X as CandidateInterviewsComponent};
