import{a as B}from"./chunk-5E5QDVKI.js";import{a as F}from"./chunk-JPQV322R.js";import{f as N,h as z,l as j,m as D,n as V,p as W}from"./chunk-NSYUTGZ4.js";import"./chunk-UY2YNJ4I.js";import"./chunk-5W2ODH74.js";import{Ab as C,Bb as x,Ca as P,Da as _,Hb as t,Ib as i,Kc as w,Lb as M,Nc as I,Ob as s,Oc as T,Qb as b,Yb as a,Zb as c,ac as v,bc as O,cc as S,dc as y,eb as o,fb as f,fc as A,jc as k,kc as E,ta as h,xb as u,zb as p}from"./chunk-4D7AL5UB.js";function L(l,g){if(l&1&&(t(0,"tr")(1,"td")(2,"strong"),a(3),i()(),t(4,"td"),a(5),i(),t(6,"td"),a(7),k(8,"date"),i(),t(9,"td")(10,"span",13),a(11),i()(),t(12,"td")(13,"button",14),a(14,"View Details"),i(),t(15,"button",15),a(16,"Withdraw"),i()()()),l&2){let e=g.$implicit;o(3),c(e.jobTitle||"Job Title"),o(2),c(e.companyName||"Company"),o(2),c(E(8,6,e.appliedAt,"MMM d, y")),o(3),x(e.status.toLowerCase()),o(),c(e.status)}}function U(l,g){if(l&1){let e=M();t(0,"button",16),s("click",function(){let n=P(e).$implicit,d=b();return _(d.goToPage(n))}),a(1),i()}if(l&2){let e=g.$implicit,r=b();C("active",e===r.currentPage),o(),c(e)}}var R=(()=>{class l{constructor(e,r){this.applicationService=e,this.authService=r,this.currentPage=1,this.itemsPerPage=25,this.applications=[],this.loading=!1,this.error="",this.totalApplications=0,this.totalPages=0}ngOnInit(){this.loadApplications()}loadApplications(){this.loading=!0,this.error="",this.authService.getCurrentUser().subscribe({next:e=>{if(!e?.id){this.error="User not authenticated",this.loading=!1;return}let r=this.currentPage-1;this.applicationService.getApplicationsByCandidate(e.id,r,this.itemsPerPage).subscribe({next:n=>{this.applications=n.content,this.totalApplications=n.totalElements,this.totalPages=n.totalPages,this.loading=!1},error:n=>{console.error("Error loading applications:",n),this.error="Failed to load applications",this.loading=!1}})},error:e=>{console.error("Error getting current user:",e),this.error="Authentication error",this.loading=!1}})}get startIndex(){return(this.currentPage-1)*this.itemsPerPage}get endIndex(){return Math.min(this.startIndex+this.itemsPerPage,this.totalApplications)}get paginatedApplications(){return this.applications}get pageNumbers(){let e=[];for(let r=1;r<=this.totalPages;r++)e.push(r);return e}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadApplications())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadApplications())}goToPage(e){this.currentPage=e,this.loadApplications()}onItemsPerPageChange(){this.currentPage=1,this.loadApplications()}static{this.\u0275fac=function(r){return new(r||l)(f(B),f(F))}}static{this.\u0275cmp=h({type:l,selectors:[["app-candidate-applications"]],standalone:!0,features:[A],decls:39,vars:11,consts:[[1,"candidate-applications-page"],[1,"page-header"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"pagination"],[1,"pagination-left"],[1,"pagination-info"],[1,"items-per-page",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"pagination-controls"],[1,"btn-page",3,"click","disabled"],["class","btn-page",3,"active","click",4,"ngFor","ngForOf"],[1,"badge"],[1,"btn-action"],[1,"btn-action","secondary"],[1,"btn-page",3,"click"]],template:function(r,n){r&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),a(3,"My Applications"),i(),t(4,"p"),a(5,"Track your job applications"),i()(),t(6,"div",2)(7,"table",3)(8,"thead")(9,"tr")(10,"th"),a(11,"Position"),i(),t(12,"th"),a(13,"Company"),i(),t(14,"th"),a(15,"Applied Date"),i(),t(16,"th"),a(17,"Status"),i(),t(18,"th"),a(19,"Actions"),i()()(),t(20,"tbody"),u(21,L,17,9,"tr",4),i()()(),t(22,"div",5)(23,"div",6)(24,"div",7),a(25),i(),t(26,"select",8),y("ngModelChange",function(m){return S(n.itemsPerPage,m)||(n.itemsPerPage=m),m}),s("change",function(){return n.onItemsPerPageChange()}),t(27,"option",9),a(28,"25 per page"),i(),t(29,"option",9),a(30,"50 per page"),i(),t(31,"option",9),a(32,"100 per page"),i()()(),t(33,"div",10)(34,"button",11),s("click",function(){return n.previousPage()}),a(35,"Previous"),i(),u(36,U,2,3,"button",12),t(37,"button",11),s("click",function(){return n.nextPage()}),a(38,"Next"),i()()()()),r&2&&(o(21),p("ngForOf",n.paginatedApplications),o(4),v("Showing ",n.startIndex+1,"-",n.endIndex," of ",n.totalApplications,""),o(),O("ngModel",n.itemsPerPage),o(),p("value",25),o(2),p("value",50),o(2),p("value",100),o(3),p("disabled",n.currentPage===1),o(2),p("ngForOf",n.pageNumbers),o(),p("disabled",n.currentPage===n.totalPages))},dependencies:[T,w,I,W,D,V,j,N,z],styles:[".candidate-applications-page[_ngcontent-%COMP%]{padding:2rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;border:1px solid #e2e8f0;overflow-x:auto;margin-bottom:1rem}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#f8fafc;border-bottom:2px solid #e2e8f0}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px;text-align:left;font-weight:600;font-size:.875rem;color:#475569}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f1f5f9}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;font-size:.875rem;color:#0f172a}.badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:.75rem;font-weight:600}.badge.applied[_ngcontent-%COMP%]{background:#e0e7ff;color:#3730a3}.badge.review[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.badge.interview[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.badge.offer[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.badge.rejected[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.btn-action[_ngcontent-%COMP%]{background:#06f;color:#fff;border:none;padding:6px 12px;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;margin-right:8px;white-space:nowrap}.btn-action.secondary[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#fff;border-radius:12px;border:1px solid #e2e8f0}.pagination-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.pagination-info[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.items-per-page[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #e2e8f0;border-radius:6px;font-size:.875rem;color:#64748b;background:#fff;cursor:pointer}.pagination-controls[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-page[_ngcontent-%COMP%]{background:#fff;color:#64748b;border:1px solid #e2e8f0;padding:6px 12px;border-radius:6px;font-size:.875rem;cursor:pointer}.btn-page[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8fafc}.btn-page.active[_ngcontent-%COMP%]{background:#06f;color:#fff;border-color:#06f}.btn-page[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}"]})}}return l})();export{R as CandidateApplicationsComponent};
