import{a as q}from"./chunk-BGS7KIU3.js";import"./chunk-BMJOLE36.js";import{c as E,e as u,f as R,g as F,i as z,j as N,k as V,p as L,r as j}from"./chunk-YXQLQ2ZV.js";import{e as k,g as O,h as T,k as I}from"./chunk-AHQOJUUW.js";import"./chunk-WIHTSVPG.js";import{$b as i,Bb as a,Cb as h,Da as g,Db as v,Ea as w,Jb as n,Kb as r,Lb as f,Nb as _,Pc as M,Qb as P,Sb as m,Tc as y,ac as b,bc as C,gb as o,hb as p,ic as S,ua as x,zb as c}from"./chunk-EGDJTDOV.js";function A(t,l){t&1&&(n(0,"div",6)(1,"h1"),i(2,"Create New Password"),r(),n(3,"p"),i(4,"Enter your new password below"),r()())}function D(t,l){if(t&1&&(n(0,"div",17),f(1,"div",18),n(2,"span",19),i(3),r()()),t&2){let e=m(2);o(),v(e.passwordStrength),o(2),b(e.passwordStrengthText)}}function Z(t,l){t&1&&(n(0,"span"),i(1,"Password is required"),r())}function B(t,l){t&1&&(n(0,"span"),i(1,"Password must be at least 8 characters"),r())}function W(t,l){if(t&1&&(n(0,"div",20),c(1,Z,2,0,"span",16)(2,B,2,0,"span",16),r()),t&2){let e=m(2);o(),a("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.required),o(),a("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.minlength)}}function Y(t,l){t&1&&(n(0,"span"),i(1,"Please confirm your password"),r())}function H(t,l){t&1&&(n(0,"span"),i(1,"Passwords do not match"),r())}function J(t,l){if(t&1&&(n(0,"div",20),c(1,Y,2,0,"span",16)(2,H,2,0,"span",16),r()),t&2){let e=m(2);o(),a("ngIf",e.confirmPassword==null||e.confirmPassword.errors==null?null:e.confirmPassword.errors.required),o(),a("ngIf",e.confirmPassword==null||e.confirmPassword.errors==null?null:e.confirmPassword.errors.passwordMismatch)}}function K(t,l){if(t&1&&(n(0,"div",20),i(1),r()),t&2){let e=m(2);o(),C(" ",e.errorMessage," ")}}function Q(t,l){t&1&&(n(0,"span"),i(1,"Reset Password"),r())}function U(t,l){t&1&&(n(0,"span"),i(1,"Resetting..."),r())}function X(t,l){if(t&1){let e=_();n(0,"form",7),P("ngSubmit",function(){g(e);let d=m();return w(d.onSubmit())}),n(1,"div",8)(2,"label",9),i(3,"New Password"),r(),f(4,"input",10),c(5,D,4,3,"div",11)(6,W,3,2,"div",12),r(),n(7,"div",8)(8,"label",13),i(9,"Confirm Password"),r(),f(10,"input",14),c(11,J,3,2,"div",12),r(),c(12,K,2,1,"div",12),n(13,"button",15),c(14,Q,2,0,"span",16)(15,U,2,0,"span",16),r()()}if(t&2){let e=m();a("formGroup",e.resetPasswordForm),o(4),h("error",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),o(),a("ngIf",e.password==null?null:e.password.value),o(),a("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),o(4),h("error",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),o(),a("ngIf",(e.confirmPassword==null?null:e.confirmPassword.invalid)&&(e.confirmPassword==null?null:e.confirmPassword.touched)),o(),a("ngIf",e.errorMessage),o(),a("disabled",e.resetPasswordForm.invalid||e.loading),o(),a("ngIf",!e.loading),o(),a("ngIf",e.loading)}}function $(t,l){if(t&1){let e=_();n(0,"div",21)(1,"div",22),i(2,"\u2713"),r(),n(3,"h2"),i(4,"Password Reset Successful"),r(),n(5,"p"),i(6,"Your password has been successfully reset"),r(),n(7,"button",23),P("click",function(){g(e);let d=m();return w(d.goToLogin())}),i(8,"Go to Login"),r()()}}function ee(t,l){t&1&&(n(0,"div",24)(1,"div",25),i(2,"\u2715"),r(),n(3,"h2"),i(4,"Invalid or Expired Link"),r(),n(5,"p"),i(6,"This password reset link is invalid or has expired"),r(),n(7,"a",26),i(8,"Request New Link"),r()())}var le=(()=>{class t{constructor(e,s,d,G){this.fb=e,this.route=s,this.router=d,this.authFacade=G,this.loading=!1,this.errorMessage="",this.resetSuccess=!1,this.invalidToken=!1,this.token="",this.passwordStrength="",this.passwordStrengthText="",this.resetPasswordForm=this.fb.group({password:["",[u.required,u.minLength(8)]],confirmPassword:["",u.required]},{validators:this.passwordMatchValidator})}ngOnInit(){if(this.token=this.route.snapshot.paramMap.get("token")||"",!this.token||this.token==="invalid-token"){this.invalidToken=!0;return}this.password?.valueChanges.subscribe(e=>{this.updatePasswordStrength(e)})}get password(){return this.resetPasswordForm.get("password")}get confirmPassword(){return this.resetPasswordForm.get("confirmPassword")}passwordMatchValidator(e){let s=e.get("password")?.value,d=e.get("confirmPassword")?.value;return s===d?null:{passwordMismatch:!0}}updatePasswordStrength(e){let s=0;e.length>=8&&s++,/[a-z]/.test(e)&&/[A-Z]/.test(e)&&s++,/\d/.test(e)&&s++,/[^a-zA-Z0-9]/.test(e)&&s++,s<=2?(this.passwordStrength="weak",this.passwordStrengthText="Weak password"):s===3?(this.passwordStrength="medium",this.passwordStrengthText="Medium password"):(this.passwordStrength="strong",this.passwordStrengthText="Strong password")}onSubmit(){this.resetPasswordForm.valid&&(this.loading=!0,this.errorMessage="",setTimeout(()=>{this.loading=!1,this.resetSuccess=!0},1500))}goToLogin(){this.router.navigate(["/auth/login"])}static{this.\u0275fac=function(s){return new(s||t)(p(L),p(k),p(O),p(q))}}static{this.\u0275cmp=x({type:t,selectors:[["app-reset-password"]],standalone:!0,features:[S],decls:6,vars:4,consts:[[1,"auth-container"],[1,"auth-card"],["class","auth-header",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","success-message",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"auth-header"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","password"],["id","password","type","password","formControlName","password","placeholder","Enter new password",1,"form-control"],["class","password-strength",4,"ngIf"],["class","error-message",4,"ngIf"],["for","confirmPassword"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Confirm new password",1,"form-control"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],[1,"password-strength"],[1,"strength-bar"],[1,"strength-text"],[1,"error-message"],[1,"success-message"],[1,"success-icon"],[1,"btn-primary",3,"click"],[1,"error-state"],[1,"error-icon"],["routerLink","/auth/forgot-password",1,"btn-primary"]],template:function(s,d){s&1&&(n(0,"div",0)(1,"div",1),c(2,A,5,0,"div",2)(3,X,16,12,"form",3)(4,$,9,0,"div",4)(5,ee,9,0,"div",5),r()()),s&2&&(o(2),a("ngIf",!d.resetSuccess&&!d.invalidToken),o(),a("ngIf",!d.resetSuccess&&!d.invalidToken),o(),a("ngIf",d.resetSuccess),o(),a("ngIf",d.invalidToken))},dependencies:[y,M,j,z,E,R,F,N,V,I,T],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#06f,#00d4ff);padding:2rem;position:relative;overflow:hidden}.auth-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%)}.auth-container[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-50%;left:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.05) 0%,transparent 70%)}.auth-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;box-shadow:0 20px 60px #0000004d;padding:3rem;max-width:450px;width:100%;position:relative;z-index:1;border:1px solid rgba(255,255,255,.2)}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#475569;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem;transition:all .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#06f;box-shadow:0 0 0 3px #0066ff1a}.form-control.error[_ngcontent-%COMP%]{border-color:#ef4444}.password-strength[_ngcontent-%COMP%]{margin-top:.5rem}.strength-bar[_ngcontent-%COMP%]{height:4px;border-radius:2px;transition:all .3s}.strength-bar.weak[_ngcontent-%COMP%]{width:33%;background:#ef4444}.strength-bar.medium[_ngcontent-%COMP%]{width:66%;background:#f59e0b}.strength-bar.strong[_ngcontent-%COMP%]{width:100%;background:#10b981}.strength-text[_ngcontent-%COMP%]{font-size:.75rem;color:#64748b;margin-top:.25rem;display:block}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.75rem;margin-top:.5rem}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;background:#06f;color:#fff;text-decoration:none;display:block;text-align:center}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0052cc}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.success-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center}.success-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#d1fae5;color:#065f46;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin:0 auto 1.5rem}.error-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#fee2e2;color:#991b1b;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin:0 auto 1.5rem}.success-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin-bottom:1rem}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:1.5rem}']})}}return t})();export{le as ResetPasswordComponent};
