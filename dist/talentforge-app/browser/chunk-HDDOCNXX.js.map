{
  "version": 3,
  "sources": ["src/app/core/services/client.service.ts"],
  "sourcesContent": ["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { environment } from '../../../environments/environment';\n\nexport interface ClientLoginRequest {\n  email: string;\n  password: string;\n}\n\nexport interface ClientLoginResponse {\n  token: string;\n  message: string;\n}\n\nexport interface ClientApproval {\n  id: string;\n  applicationId: string;\n  candidateName: string;\n  jobTitle: string;\n  status: 'PENDING' | 'APPROVED' | 'REJECTED';\n  createdAt: string;\n}\n\nexport interface ClientDashboard {\n  pendingApprovals: ClientApproval[];\n  totalPending: number;\n  totalApproved: number;\n  totalRejected: number;\n}\n\nexport interface Client {\n  id: string;\n  name: string;\n  email: string;\n  status: string;\n  createdAt: string;\n}\n\nexport interface ClientNote {\n  id: string;\n  content: string;\n  createdAt: string;\n  createdBy: string;\n}\n\nexport interface ClientActivity {\n  id: string;\n  type: string;\n  description: string;\n  createdAt: string;\n  createdBy: string;\n}\n\nexport interface ApprovalRequest {\n  applicationId: string;\n  status: 'APPROVED' | 'REJECTED';\n  feedback?: string;\n  rating?: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ClientService {\n  private readonly baseUrl = `${environment.apiUrl}/clients`;\n  private readonly clientServiceUrl = `http://localhost:8088/api/clients`;\n\n  constructor(private http: HttpClient) {}\n\n  login(request: ClientLoginRequest, tenantId: string): Observable<ClientLoginResponse> {\n    // Use auth service for login, same as regular users\n    return this.http.post<ClientLoginResponse>(`http://localhost:8081/api/auth/login`, request);\n  }\n\n  getDashboard(tenantId: string, clientUserId: string): Observable<ClientDashboard> {\n    const headers = new HttpHeaders({\n      'X-Tenant-ID': tenantId,\n      'X-User-ID': clientUserId\n    });\n    return this.http.get<ClientDashboard>(`${this.clientServiceUrl}/dashboard`, { headers });\n  }\n\n  getPendingApprovals(tenantId: string, clientUserId: string): Observable<ClientApproval[]> {\n    const token = localStorage.getItem('clientToken');\n    const headers = new HttpHeaders({\n      'X-Tenant-ID': tenantId,\n      'X-User-ID': clientUserId,\n      'Authorization': `Bearer ${token}`\n    });\n    return this.http.get<ClientApproval[]>(`${this.clientServiceUrl}/approvals/pending`, { headers });\n  }\n\n  processApproval(request: ApprovalRequest, tenantId: string, clientUserId: string): Observable<any> {\n    const token = localStorage.getItem('clientToken');\n    const headers = new HttpHeaders({\n      'X-Tenant-ID': tenantId,\n      'X-User-ID': clientUserId,\n      'Authorization': `Bearer ${token}`\n    });\n    return this.http.post(`${this.clientServiceUrl}/approvals`, request, { headers });\n  }\n\n  getClients(): Observable<Client[]> {\n    return this.http.get<Client[]>(`${this.baseUrl}`);\n  }\n\n  getClientById(id: string): Observable<Client> {\n    return this.http.get<Client>(`${this.baseUrl}/${id}`);\n  }\n\n  createClient(client: Partial<Client>): Observable<Client> {\n    return this.http.post<Client>(`${this.baseUrl}`, client);\n  }\n\n  updateClient(id: string, client: Partial<Client>): Observable<Client> {\n    return this.http.put<Client>(`${this.baseUrl}/${id}`, client);\n  }\n\n  getNotes(clientId: string): Observable<ClientNote[]> {\n    return this.http.get<ClientNote[]>(`${this.baseUrl}/${clientId}/notes`);\n  }\n\n  addNote(clientId: string, content: string): Observable<ClientNote> {\n    return this.http.post<ClientNote>(`${this.baseUrl}/${clientId}/notes`, { content });\n  }\n\n  getActivities(clientId: string): Observable<ClientActivity[]> {\n    return this.http.get<ClientActivity[]>(`${this.baseUrl}/${clientId}/activities`);\n  }\n\n  inviteClient(invitation: {email: string, companyName: string, contactPerson: string, clientId?: string}): Observable<any> {\n    // Get tenant ID from authenticated user's session\n    const currentUserStr = localStorage.getItem('user');\n    console.log('user from localStorage:', currentUserStr);\n    \n    if (!currentUserStr) {\n      throw new Error('No user session found. Please log in.');\n    }\n    \n    const currentUser = JSON.parse(currentUserStr);\n    const tenantId = currentUser.tenantId;\n    const token = localStorage.getItem('token');\n    \n    console.log('Extracted tenantId:', tenantId);\n    \n    if (!tenantId) {\n      throw new Error('No tenant ID found in user session.');\n    }\n    \n    const headers = new HttpHeaders({\n      'X-Tenant-ID': tenantId,\n      'Authorization': `Bearer ${token}`\n    });\n    return this.http.post(`${this.clientServiceUrl}/invite`, invitation, { headers });\n  }\n\n  verifyInvitation(token: string): Observable<any> {\n    return this.http.get(`${this.clientServiceUrl}/verify-invitation?token=${token}`);\n  }\n\n  registerInvitedClient(token: string, password: string): Observable<any> {\n    return this.http.post(`${this.clientServiceUrl}/register-invited?token=${token}`, { password });\n  }\n}"],
  "mappings": "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",
  "names": []
}
