import{a as V}from"./chunk-BGS7KIU3.js";import"./chunk-BMJOLE36.js";import{c as k,e as f,f as T,g as A,i as F,j as L,k as R,p as z,r as q}from"./chunk-YXQLQ2ZV.js";import{e as N,g as y,h as E,k as O}from"./chunk-AHQOJUUW.js";import"./chunk-WIHTSVPG.js";import{$b as a,Bb as o,Cb as p,Da as v,Db as C,Ea as _,Jb as i,Kb as n,Lb as u,Nb as x,Pc as S,Qb as w,Sb as m,Tc as I,ac as h,bc as P,gb as r,hb as g,ic as M,ua as b,zb as c}from"./chunk-EGDJTDOV.js";function G(e,d){e&1&&(i(0,"div",6),u(1,"div",7),i(2,"h2"),a(3,"Validating Invitation"),n(),i(4,"p"),a(5,"Please wait..."),n()())}function U(e,d){e&1&&(i(0,"div",8)(1,"div",9),a(2,"\u2715"),n(),i(3,"h2"),a(4,"Invalid Invitation"),n(),i(5,"p"),a(6,"This invitation link is invalid or has expired."),n(),i(7,"a",10),a(8,"Go to Login"),n()())}function B(e,d){e&1&&(i(0,"span"),a(1,"First name is required"),n())}function Z(e,d){if(e&1&&(i(0,"div",29),c(1,B,2,0,"span",4),n()),e&2){let t=m(2);r(),o("ngIf",t.firstName==null||t.firstName.errors==null?null:t.firstName.errors.required)}}function J(e,d){e&1&&(i(0,"span"),a(1,"Last name is required"),n())}function W(e,d){if(e&1&&(i(0,"div",29),c(1,J,2,0,"span",4),n()),e&2){let t=m(2);r(),o("ngIf",t.lastName==null||t.lastName.errors==null?null:t.lastName.errors.required)}}function Y(e,d){if(e&1&&(i(0,"div",30),u(1,"div",31),i(2,"div",32)(3,"span",33),a(4),n(),i(5,"div",34)(6,"span"),a(7,"\u2713 8+ characters"),n(),i(8,"span"),a(9,"\u2713 Upper & lowercase"),n(),i(10,"span"),a(11,"\u2713 Number"),n(),i(12,"span"),a(13,"\u2713 Special character"),n()()()()),e&2){let t=m(2);r(),C(t.passwordStrength),r(3),h(t.passwordStrengthText),r(2),p("met",t.hasMinLength),r(2),p("met",t.hasUpperLower),r(2),p("met",t.hasNumber),r(2),p("met",t.hasSpecial)}}function H(e,d){e&1&&(i(0,"span"),a(1,"Password is required"),n())}function K(e,d){e&1&&(i(0,"span"),a(1,"Password must be at least 8 characters"),n())}function Q(e,d){if(e&1&&(i(0,"div",29),c(1,H,2,0,"span",4)(2,K,2,0,"span",4),n()),e&2){let t=m(2);r(),o("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.required),r(),o("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.minlength)}}function X(e,d){e&1&&(i(0,"span"),a(1,"Please confirm your password"),n())}function $(e,d){e&1&&(i(0,"span"),a(1,"Passwords do not match"),n())}function tt(e,d){if(e&1&&(i(0,"div",29),c(1,X,2,0,"span",4)(2,$,2,0,"span",4),n()),e&2){let t=m(2);r(),o("ngIf",t.confirmPassword==null||t.confirmPassword.errors==null?null:t.confirmPassword.errors.required),r(),o("ngIf",t.confirmPassword==null||t.confirmPassword.errors==null?null:t.confirmPassword.errors.passwordMismatch)}}function et(e,d){if(e&1&&(i(0,"div",29),a(1),n()),e&2){let t=m(2);r(),P(" ",t.errorMessage," ")}}function nt(e,d){e&1&&(i(0,"span"),a(1,"Accept Invitation"),n())}function it(e,d){e&1&&(i(0,"span"),a(1,"Setting up account..."),n())}function rt(e,d){if(e&1){let t=x();i(0,"div")(1,"div",11)(2,"h1"),a(3,"Accept Invitation"),n(),i(4,"p"),a(5,"Complete your account setup"),n(),i(6,"div",12)(7,"span",13),a(8),n(),i(9,"span",14),a(10),n()()(),i(11,"form",15),w("ngSubmit",function(){v(t);let l=m();return _(l.onSubmit())}),i(12,"div",16)(13,"div",17)(14,"label",18),a(15,"First Name"),n(),u(16,"input",19),c(17,Z,2,1,"div",20),n(),i(18,"div",17)(19,"label",21),a(20,"Last Name"),n(),u(21,"input",22),c(22,W,2,1,"div",20),n()(),i(23,"div",17)(24,"label",23),a(25,"Password"),n(),u(26,"input",24),c(27,Y,14,11,"div",25)(28,Q,3,2,"div",20),n(),i(29,"div",17)(30,"label",26),a(31,"Confirm Password"),n(),u(32,"input",27),c(33,tt,3,2,"div",20),n(),c(34,et,2,1,"div",20),i(35,"button",28),c(36,nt,2,0,"span",4)(37,it,2,0,"span",4),n()()()}if(e&2){let t=m();r(8),h(t.invitationRole),r(2),h(t.invitationEmail),r(),o("formGroup",t.acceptForm),r(5),p("error",(t.firstName==null?null:t.firstName.invalid)&&(t.firstName==null?null:t.firstName.touched)),r(),o("ngIf",(t.firstName==null?null:t.firstName.invalid)&&(t.firstName==null?null:t.firstName.touched)),r(4),p("error",(t.lastName==null?null:t.lastName.invalid)&&(t.lastName==null?null:t.lastName.touched)),r(),o("ngIf",(t.lastName==null?null:t.lastName.invalid)&&(t.lastName==null?null:t.lastName.touched)),r(4),p("error",(t.password==null?null:t.password.invalid)&&(t.password==null?null:t.password.touched)),r(),o("ngIf",t.password==null?null:t.password.value),r(),o("ngIf",(t.password==null?null:t.password.invalid)&&(t.password==null?null:t.password.touched)),r(4),p("error",(t.confirmPassword==null?null:t.confirmPassword.invalid)&&(t.confirmPassword==null?null:t.confirmPassword.touched)),r(),o("ngIf",(t.confirmPassword==null?null:t.confirmPassword.invalid)&&(t.confirmPassword==null?null:t.confirmPassword.touched)),r(),o("ngIf",t.errorMessage),r(),o("disabled",t.acceptForm.invalid||t.loading),r(),o("ngIf",!t.loading),r(),o("ngIf",t.loading)}}function at(e,d){if(e&1){let t=x();i(0,"div",35)(1,"div",36),a(2,"\u2713"),n(),i(3,"h2"),a(4,"Account Created!"),n(),i(5,"p"),a(6,"Your account has been successfully created."),n(),i(7,"button",37),w("click",function(){v(t);let l=m();return _(l.goToLogin())}),a(8,"Continue to Login"),n()()}}var ft=(()=>{class e{constructor(t,s,l,j){this.fb=t,this.route=s,this.router=l,this.authFacade=j,this.validating=!0,this.validToken=!1,this.invalidToken=!1,this.submitted=!1,this.loading=!1,this.errorMessage="",this.token="",this.invitationEmail="",this.invitationRole="",this.passwordStrength="",this.passwordStrengthText="",this.hasMinLength=!1,this.hasUpperLower=!1,this.hasNumber=!1,this.hasSpecial=!1,this.acceptForm=this.fb.group({firstName:["",f.required],lastName:["",f.required],password:["",[f.required,f.minLength(8)]],confirmPassword:["",f.required]},{validators:this.passwordMatchValidator}),this.password?.valueChanges.subscribe(D=>{this.updatePasswordStrength(D)})}ngOnInit(){if(this.token=this.route.snapshot.paramMap.get("token")||"",!this.token){this.validating=!1,this.invalidToken=!0;return}this.validateInvitation()}validateInvitation(){this.authFacade.validateInvitation(this.token).subscribe({next:t=>{this.validating=!1,this.validToken=!0,this.invitationEmail=t.email,this.invitationRole=this.formatRole(t.role)},error:()=>{this.validating=!1,this.invalidToken=!0}})}formatRole(t){return{TENANT_ADMIN:"Tenant Admin",BILLING_MANAGER:"Billing Manager",PLATFORM_ADMIN:"Platform Admin",RECRUITER:"Recruiter"}[t]||t}get firstName(){return this.acceptForm.get("firstName")}get lastName(){return this.acceptForm.get("lastName")}get password(){return this.acceptForm.get("password")}get confirmPassword(){return this.acceptForm.get("confirmPassword")}passwordMatchValidator(t){let s=t.get("password"),l=t.get("confirmPassword");return!s||!l?null:l.value&&s.value!==l.value?(l.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(l.hasError("passwordMismatch")&&l.setErrors(null),null)}updatePasswordStrength(t){this.hasMinLength=t.length>=8,this.hasUpperLower=/[a-z]/.test(t)&&/[A-Z]/.test(t),this.hasNumber=/\d/.test(t),this.hasSpecial=/[^a-zA-Z0-9]/.test(t);let s=[this.hasMinLength,this.hasUpperLower,this.hasNumber,this.hasSpecial].filter(Boolean).length;s<=1?(this.passwordStrength="weak",this.passwordStrengthText="Weak"):s===2?(this.passwordStrength="fair",this.passwordStrengthText="Fair"):s===3?(this.passwordStrength="good",this.passwordStrengthText="Good"):(this.passwordStrength="strong",this.passwordStrengthText="Strong")}onSubmit(){if(this.acceptForm.valid){this.loading=!0,this.errorMessage="";let t={token:this.token,firstName:this.firstName?.value,lastName:this.lastName?.value,password:this.password?.value};this.authFacade.acceptInvitation(t).subscribe({next:()=>{this.loading=!1,this.submitted=!0},error:s=>{this.loading=!1,this.errorMessage=s.message||"Failed to accept invitation"}})}}goToLogin(){this.router.navigate(["/auth/login"])}static{this.\u0275fac=function(s){return new(s||e)(g(z),g(N),g(y),g(V))}}static{this.\u0275cmp=b({type:e,selectors:[["app-accept-invitation"]],standalone:!0,features:[M],decls:6,vars:4,consts:[[1,"auth-container"],[1,"auth-card"],["class","validating-state",4,"ngIf"],["class","error-state",4,"ngIf"],[4,"ngIf"],["class","success-state",4,"ngIf"],[1,"validating-state"],[1,"spinner"],[1,"error-state"],[1,"error-icon"],["routerLink","/auth/login",1,"btn-secondary"],[1,"auth-header"],[1,"invitation-info"],[1,"role-badge"],[1,"email"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","firstName"],["id","firstName","type","text","formControlName","firstName","placeholder","John",1,"form-control"],["class","error-message",4,"ngIf"],["for","lastName"],["id","lastName","type","text","formControlName","lastName","placeholder","Doe",1,"form-control"],["for","password"],["id","password","type","password","formControlName","password","placeholder","Create a strong password",1,"form-control"],["class","password-strength",4,"ngIf"],["for","confirmPassword"],["id","confirmPassword","type","password","formControlName","confirmPassword","placeholder","Re-enter your password",1,"form-control"],["type","submit",1,"btn-primary",3,"disabled"],[1,"error-message"],[1,"password-strength"],[1,"strength-bar"],[1,"strength-details"],[1,"strength-text"],[1,"requirements"],[1,"success-state"],[1,"success-icon"],[1,"btn-primary",3,"click"]],template:function(s,l){s&1&&(i(0,"div",0)(1,"div",1),c(2,G,6,0,"div",2)(3,U,9,0,"div",3)(4,rt,38,20,"div",4)(5,at,9,0,"div",5),n()()),s&2&&(r(2),o("ngIf",l.validating),r(),o("ngIf",l.invalidToken),r(),o("ngIf",l.validToken&&!l.submitted),r(),o("ngIf",l.submitted))},dependencies:[I,S,q,F,k,T,A,L,R,O,E],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#06f,#00d4ff);padding:2rem;position:relative;overflow:hidden}.auth-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%)}.auth-container[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-50%;left:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.05) 0%,transparent 70%)}.auth-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;box-shadow:0 20px 60px #0000004d;padding:3rem;max-width:500px;width:100%;position:relative;z-index:1;border:1px solid rgba(255,255,255,.2)}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin-bottom:1rem}.invitation-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;align-items:center}.role-badge[_ngcontent-%COMP%]{background:#06f;color:#fff;padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:600}.email[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.validating-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%], .success-state[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#06f;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.success-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#d1fae5;color:#065f46;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin:0 auto 1.5rem}.error-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#fee2e2;color:#991b1b;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin:0 auto 1.5rem}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin-bottom:1rem}p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#475569;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem;transition:all .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#06f;box-shadow:0 0 0 3px #0066ff1a}.form-control.error[_ngcontent-%COMP%]{border-color:#ef4444}.password-strength[_ngcontent-%COMP%]{margin-top:.5rem}.strength-bar[_ngcontent-%COMP%]{height:4px;border-radius:2px;transition:all .3s;margin-bottom:.5rem}.strength-bar.weak[_ngcontent-%COMP%]{width:25%;background:#ef4444}.strength-bar.fair[_ngcontent-%COMP%]{width:50%;background:#f59e0b}.strength-bar.good[_ngcontent-%COMP%]{width:75%;background:#3b82f6}.strength-bar.strong[_ngcontent-%COMP%]{width:100%;background:#10b981}.strength-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.strength-text[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600}.requirements[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.65rem;color:#94a3b8}.requirements[_ngcontent-%COMP%]   span.met[_ngcontent-%COMP%]{color:#10b981}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.75rem;margin-top:.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]{background:#06f;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0052cc}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#06f;border:1px solid #0066ff;text-decoration:none;display:block;text-align:center}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f0f7ff}']})}}return e})();export{ft as AcceptInvitationComponent};
