import{a as P}from"./chunk-E5ZNVKB7.js";import"./chunk-I6CG5S7U.js";import{e as k,g as w,h as M,k as S}from"./chunk-UY2YNJ4I.js";import"./chunk-5W2ODH74.js";import{Ca as m,Da as g,Hb as t,Ib as n,Jb as _,Lb as u,Lc as C,Ob as h,Oc as E,Qb as l,Yb as r,Zb as x,_b as b,eb as o,fb as f,fc as y,ta as v,xb as p,zb as s}from"./chunk-4D7AL5UB.js";function O(i,d){i&1&&(t(0,"div",5),_(1,"div",6),t(2,"h2"),r(3,"Verifying Your Email"),n(),t(4,"p"),r(5,"Please wait while we verify your email address..."),n()())}function V(i,d){if(i&1){let e=u();t(0,"div",7)(1,"div",8),r(2,"\u2713"),n(),t(3,"h2"),r(4,"Email Verified!"),n(),t(5,"p"),r(6,"Your email has been successfully verified"),n(),t(7,"button",9),h("click",function(){m(e);let a=l();return g(a.goToLogin())}),r(8,"Continue to Login"),n()()}}function I(i,d){i&1&&(t(0,"span"),r(1,"Resend Verification Email"),n())}function F(i,d){i&1&&(t(0,"span"),r(1,"Sending..."),n())}function T(i,d){if(i&1&&(t(0,"span"),r(1),n()),i&2){let e=l(2);o(),b("Resend in ",e.resendCooldown,"s")}}function R(i,d){if(i&1){let e=u();t(0,"div",10)(1,"div",11),r(2,"\u2715"),n(),t(3,"h2"),r(4,"Verification Failed"),n(),t(5,"p"),r(6),n(),t(7,"button",12),h("click",function(){m(e);let a=l();return g(a.resendVerification())}),p(8,I,2,0,"span",13)(9,F,2,0,"span",13)(10,T,2,1,"span",13),n(),t(11,"a",14),r(12,"Back to Login"),n()()}if(i&2){let e=l();o(6),x(e.errorMessage),o(),s("disabled",e.resending||e.resendCooldown>0),o(),s("ngIf",!e.resending&&e.resendCooldown===0),o(),s("ngIf",e.resending),o(),s("ngIf",e.resendCooldown>0)}}function L(i,d){i&1&&(t(0,"div",7)(1,"div",8),r(2,"\u2713"),n(),t(3,"h2"),r(4,"Email Sent!"),n(),t(5,"p"),r(6,"We've sent a new verification email. Please check your inbox."),n(),t(7,"a",14),r(8,"Back to Login"),n()())}var N=(()=>{class i{constructor(e,c,a){this.route=e,this.router=c,this.authFacade=a,this.verifying=!0,this.verificationSuccess=!1,this.verificationFailed=!1,this.resendSuccess=!1,this.resending=!1,this.errorMessage="",this.token="",this.resendCooldown=0}ngOnInit(){if(this.token=this.route.snapshot.paramMap.get("token")||"",!this.token){this.verifying=!1,this.verificationFailed=!0,this.errorMessage="Invalid verification link";return}this.verifyEmail()}verifyEmail(){this.authFacade.verifyEmail(this.token).subscribe({next:()=>{this.verifying=!1,this.verificationSuccess=!0},error:e=>{this.verifying=!1,this.verificationFailed=!0,this.errorMessage=e.message||"The verification link is invalid or has expired"}})}resendVerification(){this.resending=!0,this.authFacade.resendVerificationEmail(this.token).subscribe({next:()=>{this.resending=!1,this.verificationFailed=!1,this.resendSuccess=!0,this.startResendCooldown()},error:()=>{this.resending=!1,this.errorMessage="Failed to resend verification email"}})}startResendCooldown(){this.resendCooldown=60;let e=setInterval(()=>{this.resendCooldown--,this.resendCooldown===0&&clearInterval(e)},1e3)}goToLogin(){this.router.navigate(["/auth/login"])}static{this.\u0275fac=function(c){return new(c||i)(f(k),f(w),f(P))}}static{this.\u0275cmp=v({type:i,selectors:[["app-verify-email"]],standalone:!0,features:[y],decls:6,vars:4,consts:[[1,"auth-container"],[1,"auth-card"],["class","verifying-state",4,"ngIf"],["class","success-message",4,"ngIf"],["class","error-state",4,"ngIf"],[1,"verifying-state"],[1,"spinner"],[1,"success-message"],[1,"success-icon"],[1,"btn-primary",3,"click"],[1,"error-state"],[1,"error-icon"],[1,"btn-secondary",3,"click","disabled"],[4,"ngIf"],["routerLink","/auth/login",1,"link"]],template:function(c,a){c&1&&(t(0,"div",0)(1,"div",1),p(2,O,6,0,"div",2)(3,V,9,0,"div",3)(4,R,13,5,"div",4)(5,L,9,0,"div",3),n()()),c&2&&(o(2),s("ngIf",a.verifying),o(),s("ngIf",a.verificationSuccess),o(),s("ngIf",a.verificationFailed),o(),s("ngIf",a.resendSuccess))},dependencies:[E,C,S,M],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#06f,#00d4ff);padding:2rem;position:relative;overflow:hidden}.auth-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%)}.auth-container[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-50%;left:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.05) 0%,transparent 70%)}.auth-card[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;box-shadow:0 20px 60px #0000004d;padding:3rem;max-width:450px;width:100%;text-align:center;position:relative;z-index:1;border:1px solid rgba(255,255,255,.2)}.verifying-state[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center}.spinner[_ngcontent-%COMP%]{width:48px;height:48px;border:4px solid #e2e8f0;border-top-color:#06f;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1.5rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.success-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#d1fae5;color:#065f46;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin:0 auto 1.5rem}.error-icon[_ngcontent-%COMP%]{width:64px;height:64px;background:#fee2e2;color:#991b1b;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:700;margin:0 auto 1.5rem}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin-bottom:1rem}p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:1.5rem}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;margin-bottom:1rem}.btn-primary[_ngcontent-%COMP%]{background:#06f;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0052cc}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#06f;border:1px solid #0066ff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f0f7ff}.btn-secondary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.link[_ngcontent-%COMP%]{color:#06f;text-decoration:none;font-size:.875rem;display:block;margin-top:1rem}.link[_ngcontent-%COMP%]:hover{text-decoration:underline}']})}}return i})();export{N as VerifyEmailComponent};
