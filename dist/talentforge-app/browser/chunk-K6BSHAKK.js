import{a as N}from"./chunk-5E5QDVKI.js";import{f as V,h as T,l as z,m as D,n as F,p as j}from"./chunk-NSYUTGZ4.js";import{k as I}from"./chunk-UY2YNJ4I.js";import"./chunk-5W2ODH74.js";import{$b as S,Ab as h,Ca as f,Da as u,Hb as n,Ib as o,Kc as A,Lb as b,Lc as k,Ob as m,Oc as E,Qb as c,Yb as a,Zb as x,_b as C,bc as v,cc as M,dc as w,eb as r,fb as O,fc as y,ta as P,xb as _,zb as g}from"./chunk-4D7AL5UB.js";function R(l,d){if(l&1&&(n(0,"span",31),a(1),o()),l&2){let t=c().$implicit;r(),x(t.jobTitle)}}function U(l,d){if(l&1){let t=b();n(0,"div",32)(1,"button",33),m("click",function(i){f(t);let p=c().$implicit;return c(2).updateApplicationStatus(p),u(i.stopPropagation())}),a(2,"Update"),o()()}}function W(l,d){if(l&1){let t=b();n(0,"div",23)(1,"div",24),m("click",function(){let i=f(t).$implicit,p=c(2);return u(p.viewApplication(i.id))}),n(2,"span",25),a(3),o(),n(4,"div",26)(5,"strong",27),a(6),o(),_(7,R,2,1,"span",28),n(8,"span",29),a(9),o()()(),_(10,U,3,0,"div",30),o()}if(l&2){let t=d.$implicit,e=c(2);h("compact",e.compactView),r(3),x(t.initials),r(3),x(t.name),r(),g("ngIf",!e.compactView),r(2),C("",t.daysAgo,"d ago"),r(),g("ngIf",!e.compactView)}}function L(l,d){if(l&1){let t=b();n(0,"button",34),m("click",function(){f(t);let i=c().$implicit,p=c();return u(p.loadMore(i))}),a(1),o()}if(l&2){let t=c().$implicit,e=c();r(),C(" Load ",e.getRemainingCount(t)," more ")}}function J(l,d){if(l&1&&(n(0,"div",17)(1,"div",18)(2,"h3"),a(3),o(),n(4,"span",19),a(5),o()(),n(6,"div",20),_(7,W,11,7,"div",21)(8,L,2,1,"button",22),o()()),l&2){let t=d.$implicit,e=c();r(3),x(t.name),r(2),S("",e.getVisibleCount(t),"/",t.applications.length,""),r(2),g("ngForOf",e.getVisibleApplications(t)),r(),g("ngIf",e.hasMore(t))}}function $(l,d){if(l&1){let t=b();n(0,"button",48),m("click",function(){let i=f(t).$implicit,p=c(3);return u(p.submitStatusUpdate(i.value))}),a(1),o()}if(l&2){let t=d.$implicit,e=c(3);h("current",t.value===e.selectedApplication.status),g("disabled",t.value===e.selectedApplication.status||e.updatingStatus),r(),C(" ",t.label," ")}}function B(l,d){if(l&1&&(n(0,"div",42)(1,"div",43)(2,"h3"),a(3),o(),n(4,"p"),a(5),o(),n(6,"p",44),a(7,"Current Status: "),n(8,"strong"),a(9),o()()(),n(10,"div",45)(11,"h4"),a(12,"Update Status To:"),o(),n(13,"div",46),_(14,$,2,4,"button",47),o()()()),l&2){let t=c(2);r(3),x(t.selectedApplication.candidateName||"Unknown Candidate"),r(2),x(t.selectedApplication.jobTitle||"Unknown Position"),r(4),x(t.selectedApplication.status),r(5),g("ngForOf",t.statusOptions)}}function H(l,d){if(l&1){let t=b();n(0,"div",35),m("click",function(){f(t);let i=c();return u(i.closeStatusModal())}),n(1,"div",36),m("click",function(i){return f(t),u(i.stopPropagation())}),n(2,"div",37)(3,"h2"),a(4,"Update Application Status"),o(),n(5,"button",38),m("click",function(){f(t);let i=c();return u(i.closeStatusModal())}),a(6,"\u2715"),o()(),_(7,B,15,4,"div",39),n(8,"div",40)(9,"button",41),m("click",function(){f(t);let i=c();return u(i.closeStatusModal())}),a(10,"Cancel"),o()()()()}if(l&2){let t=c();r(7),g("ngIf",t.selectedApplication)}}var tt=(()=>{class l{constructor(t){this.applicationService=t,this.totalApplications=0,this.selectedClient="all",this.selectedJob="all",this.selectedPosition="all",this.compactView=!1,this.loading=!1,this.error="",this.showStatusModal=!1,this.selectedApplication=null,this.statusNotes="",this.updatingStatus=!1,this.cardsPerColumn=25,this.applications=[],this.stages=[{name:"Applied",status:"APPLIED",visibleCount:25,applications:[]},{name:"Reviewing",status:"REVIEWING",visibleCount:25,applications:[]},{name:"Interview",status:"INTERVIEW",visibleCount:25,applications:[]},{name:"Offer",status:"OFFER",visibleCount:25,applications:[]},{name:"Hired",status:"HIRED",visibleCount:25,applications:[]},{name:"Rejected",status:"REJECTED",visibleCount:25,applications:[]}],this.statusOptions=[{value:"APPLIED",label:"Applied"},{value:"REVIEWING",label:"Reviewing"},{value:"INTERVIEW",label:"Interview"},{value:"OFFER",label:"Offer Extended"},{value:"HIRED",label:"Hired"},{value:"REJECTED",label:"Rejected"}]}ngOnInit(){this.loadApplications()}loadApplications(){this.loading=!0,this.error="",this.applicationService.getAllApplications(0,100).subscribe({next:t=>{this.applications=t.content,this.totalApplications=t.totalElements,this.organizeApplicationsByStage(),this.loading=!1},error:t=>{console.error("Error loading applications:",t),this.error="Failed to load applications",this.loading=!1}})}organizeApplicationsByStage(){this.stages.forEach(t=>t.applications=[]),this.applications.forEach(t=>{let e={id:t.id,name:t.candidateName||"Unknown Candidate",initials:this.getInitials(t.candidateName||"UC"),jobTitle:t.jobTitle||"Unknown Position",email:t.candidateEmail||"",phone:"",daysAgo:this.getDaysAgo(t.appliedAt),skills:[]},i=this.stages.find(p=>p.status===t.status);i&&i.applications.push(e)})}getInitials(t){return t.split(" ").map(e=>e[0]).join("").toUpperCase()}getDaysAgo(t){let e=new Date(t),p=Math.abs(new Date().getTime()-e.getTime());return Math.ceil(p/(1e3*60*60*24))}viewApplication(t){let e=this.applications.find(i=>i.id===t);e&&alert(`Application Details

Candidate: ${e.candidateName||"Unknown"}
Job: ${e.jobTitle||"Unknown"}
Status: ${e.status}
Applied: ${new Date(e.appliedAt).toLocaleDateString()}

Cover Letter:
${e.coverLetter||"No cover letter provided"}`)}updateApplicationStatus(t){this.selectedApplication=t,this.statusNotes="",this.showStatusModal=!0}closeStatusModal(){this.showStatusModal=!1,this.selectedApplication=null,this.statusNotes=""}submitStatusUpdate(t){this.selectedApplication&&(this.updatingStatus=!0,this.applicationService.updateApplicationStatus(this.selectedApplication.id,t).subscribe({next:e=>{let i=this.applications.findIndex(p=>p.id===this.selectedApplication.id);i!==-1&&(this.applications[i]=e),this.organizeApplicationsByStage(),this.closeStatusModal(),this.updatingStatus=!1},error:e=>{console.error("Error updating status:",e),alert("Failed to update application status"),this.updatingStatus=!1}}))}scheduleInterview(t,e){t.stopPropagation(),console.log("Schedule interview:",e)}sendEmail(t,e){t.stopPropagation(),console.log("Send email:",e)}viewResume(t,e){t.stopPropagation(),console.log("View resume:",e)}getVisibleApplications(t){return t.applications.slice(0,t.visibleCount)}getVisibleCount(t){return Math.min(t.visibleCount,t.applications.length)}hasMore(t){return t.applications.length>t.visibleCount}getRemainingCount(t){return t.applications.length-t.visibleCount}loadMore(t){t.visibleCount+=this.cardsPerColumn}toggleView(){this.compactView=!this.compactView}static{this.\u0275fac=function(e){return new(e||l)(O(N))}}static{this.\u0275cmp=P({type:l,selectors:[["app-applications-manage"]],standalone:!0,features:[y],decls:42,vars:9,consts:[[1,"applications-manage"],[1,"page-header"],[1,"subtitle"],[1,"btn-secondary"],[1,"filters-section"],[1,"view-toggle",3,"click"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","all"],["value","TechCorp"],["value","FinanceInc"],["value","HealthPlus"],["value","Developer"],["value","Manager"],["value","Designer"],[1,"pipeline-board"],["class","pipeline-column",4,"ngFor","ngForOf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"pipeline-column"],[1,"column-header"],[1,"count"],[1,"applications-list"],["class","application-card",3,"compact",4,"ngFor","ngForOf"],["class","load-more",3,"click",4,"ngIf"],[1,"application-card"],[1,"card-content",3,"click"],[1,"avatar-mini"],[1,"app-info"],[1,"name"],["class","job",4,"ngIf"],[1,"time"],["class","card-actions",4,"ngIf"],[1,"job"],[1,"card-actions"],[1,"btn-mini",3,"click"],[1,"load-more",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"modal-body"],[1,"application-summary"],[1,"current-status"],[1,"status-options"],[1,"status-grid"],["class","status-btn",3,"current","disabled","click",4,"ngFor","ngForOf"],[1,"status-btn",3,"click","disabled"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"h1"),a(4,"Application Pipeline"),o(),n(5,"p",2),a(6),o()(),n(7,"button",3),a(8,"Export"),o()(),n(9,"div",4)(10,"button",5),m("click",function(){return i.toggleView()}),a(11),o(),n(12,"select",6),w("ngModelChange",function(s){return M(i.selectedClient,s)||(i.selectedClient=s),s}),n(13,"option",7),a(14,"All Clients"),o(),n(15,"option",8),a(16,"TechCorp Solutions"),o(),n(17,"option",9),a(18,"Global Finance Inc"),o(),n(19,"option",10),a(20,"HealthPlus Medical"),o()(),n(21,"select",6),w("ngModelChange",function(s){return M(i.selectedJob,s)||(i.selectedJob=s),s}),n(22,"option",7),a(23,"All Jobs"),o(),n(24,"option",11),a(25,"Senior Full Stack Developer"),o(),n(26,"option",12),a(27,"Product Manager"),o(),n(28,"option",13),a(29,"UX Designer"),o()(),n(30,"select",6),w("ngModelChange",function(s){return M(i.selectedPosition,s)||(i.selectedPosition=s),s}),n(31,"option",7),a(32,"All Positions"),o(),n(33,"option",11),a(34,"Developer"),o(),n(35,"option",12),a(36,"Manager"),o(),n(37,"option",13),a(38,"Designer"),o()()(),n(39,"div",14),_(40,J,9,5,"div",15),o(),_(41,H,11,1,"div",16),o()),e&2&&(r(6),C("",i.totalApplications," total applications"),r(5),C(" ",i.compactView?"\u{1F4CB} Cards":"\u2630 List"," "),r(),v("ngModel",i.selectedClient),r(9),v("ngModel",i.selectedJob),r(9),v("ngModel",i.selectedPosition),r(9),h("compact-view",i.compactView),r(),g("ngForOf",i.stages),r(),g("ngIf",i.showStatusModal))},dependencies:[E,A,k,I,j,D,F,z,V,T],styles:[".applications-manage[_ngcontent-%COMP%]{padding:32px;background:#f8fafc;min-height:100vh}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#0f172a;margin-bottom:4px}.page-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.filters-section[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:24px;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #e2e8f0;border-radius:8px;background:#fff;font-weight:500;cursor:pointer;font-size:.875rem}.btn-secondary[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #e2e8f0;background:#fff;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s}.btn-secondary[_ngcontent-%COMP%]:hover{background:#f8fafc}.pipeline-board[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;overflow-x:auto}.pipeline-column[_ngcontent-%COMP%]{min-width:280px;background:#f8fafc;border-radius:12px;border:1px solid #e2e8f0}.column-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:#fff;border-radius:12px 12px 0 0;border-bottom:2px solid #e2e8f0}.column-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#0f172a;margin:0}.column-header[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b;padding:4px 10px;border-radius:12px;font-size:.75rem;font-weight:600}.applications-list[_ngcontent-%COMP%]{padding:12px;min-height:200px;max-height:70vh;overflow-y:auto}.application-row[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:12px;margin-bottom:8px;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:12px}.application-row[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000014;border-color:#06f}.application-row.compact[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px}.application-row.compact[_ngcontent-%COMP%]   .avatar-mini[_ngcontent-%COMP%]{width:24px;height:24px;font-size:.65rem}.application-row.compact[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:.8rem}.application-row.compact[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.7rem}.application-row[_ngcontent-%COMP%]   .avatar-mini[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,#06f,#00d4ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.75rem;flex-shrink:0}.application-row[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]{flex:1;min-width:0}.application-row[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#0f172a;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.application-row[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#64748b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}.application-row[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.75rem;color:#94a3b8;flex-shrink:0}.pipeline-board.compact-view[_ngcontent-%COMP%]   .application-row[_ngcontent-%COMP%]{padding:6px 12px}.view-toggle[_ngcontent-%COMP%]{padding:10px 16px;border:1px solid #e2e8f0;background:#fff;border-radius:8px;font-weight:600;cursor:pointer;font-size:.875rem;transition:all .3s}.view-toggle[_ngcontent-%COMP%]:hover{background:#f8fafc;border-color:#06f;color:#06f}.load-more[_ngcontent-%COMP%]{width:100%;padding:8px;background:#fff;border:1px dashed #cbd5e1;border-radius:6px;color:#64748b;font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s}.load-more[_ngcontent-%COMP%]:hover{background:#f8fafc;border-color:#06f;color:#06f}@media (max-width: 1400px){.pipeline-board[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 768px){.pipeline-board[_ngcontent-%COMP%]{grid-template-columns:1fr}}.application-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;margin-bottom:8px;transition:all .2s;overflow:hidden}.application-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000014;border-color:#06f}.application-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:12px;cursor:pointer;display:flex;align-items:center;gap:12px}.application-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:8px 12px;border-top:1px solid #f1f5f9;background:#f8fafc;display:flex;gap:8px;justify-content:flex-end}.application-card[_ngcontent-%COMP%]   .btn-mini[_ngcontent-%COMP%]{padding:4px 8px;font-size:.75rem;border:1px solid #e2e8f0;background:#fff;border-radius:4px;cursor:pointer;font-weight:500;transition:all .2s}.application-card[_ngcontent-%COMP%]   .btn-mini[_ngcontent-%COMP%]:hover{background:#06f;color:#fff;border-color:#06f}.application-card[_ngcontent-%COMP%]   .avatar-mini[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,#06f,#00d4ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:.75rem;flex-shrink:0}.application-card[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]{flex:1;min-width:0}.application-card[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#0f172a;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:2px}.application-card[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#64748b;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:2px}.application-card[_ngcontent-%COMP%]   .app-info[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.7rem;color:#94a3b8}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #0000004d}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:24px;border-bottom:1px solid #e2e8f0}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#64748b;cursor:pointer;padding:0;width:32px;height:32px}.close-btn[_ngcontent-%COMP%]:hover{color:#0f172a}.modal-body[_ngcontent-%COMP%]{padding:24px}.application-summary[_ngcontent-%COMP%]{background:#f8fafc;padding:16px;border-radius:8px;margin-bottom:24px;border:1px solid #e2e8f0}.application-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#0f172a;margin:0 0 8px}.application-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 4px;color:#64748b;font-size:.875rem}.application-summary[_ngcontent-%COMP%]   .current-status[_ngcontent-%COMP%]{color:#0f172a;font-weight:500}.status-options[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#0f172a;margin:0 0 16px}.status-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.status-btn[_ngcontent-%COMP%]{padding:12px 16px;border:2px solid #e2e8f0;background:#fff;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;text-align:center}.status-btn[_ngcontent-%COMP%]:hover:not(:disabled){border-color:#06f;background:#f0f7ff;color:#06f}.status-btn.current[_ngcontent-%COMP%]{border-color:#10b981;background:#d1fae5;color:#065f46}.status-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:24px;border-top:1px solid #e2e8f0}"]})}}return l})();export{tt as ApplicationsManageComponent};
