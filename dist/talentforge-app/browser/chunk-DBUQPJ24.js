import{a as D}from"./chunk-E5ZNVKB7.js";import"./chunk-I6CG5S7U.js";import{a as c}from"./chunk-TGBIRMAY.js";import{a as S}from"./chunk-JPQV322R.js";import{c as A,e as f,f as E,g as P,i as x,j as T,k as N,l as y,m as O,n as U,o as F,q as R}from"./chunk-NSYUTGZ4.js";import"./chunk-UY2YNJ4I.js";import"./chunk-5W2ODH74.js";import{Ab as v,Hb as o,Ib as i,Jb as I,Lc as M,Ob as h,Oc as b,Qb as p,Yb as a,_b as g,eb as r,fb as u,fc as C,ta as _,xb as d,zb as l}from"./chunk-4D7AL5UB.js";function w(e,s){e&1&&(o(0,"span"),a(1,"Email is required"),i())}function L(e,s){e&1&&(o(0,"span"),a(1,"Please enter a valid email"),i())}function G(e,s){if(e&1&&(o(0,"div",17),d(1,w,2,0,"span",16)(2,L,2,0,"span",16),i()),e&2){let n=p();r(),l("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.required),r(),l("ngIf",n.email==null||n.email.errors==null?null:n.email.errors.email)}}function k(e,s){e&1&&(o(0,"option",18),a(1,"Recruiter"),i())}function q(e,s){e&1&&(o(0,"option",19),a(1,"Admin"),i())}function z(e,s){e&1&&(o(0,"option",20),a(1,"Billing Manager"),i())}function V(e,s){e&1&&(o(0,"option",21),a(1,"Platform Admin"),i())}function B(e,s){e&1&&(o(0,"span"),a(1,"Please select a role"),i())}function j(e,s){if(e&1&&(o(0,"div",17),d(1,B,2,0,"span",16),i()),e&2){let n=p();r(),l("ngIf",n.role==null||n.role.errors==null?null:n.role.errors.required)}}function $(e,s){if(e&1&&(o(0,"div",22),a(1),i()),e&2){let n=p();r(),g(" ",n.successMessage," ")}}function H(e,s){if(e&1&&(o(0,"div",17),a(1),i()),e&2){let n=p();r(),g(" ",n.errorMessage," ")}}function J(e,s){e&1&&(o(0,"span"),a(1,"Send Invitation"),i())}function K(e,s){e&1&&(o(0,"span"),a(1,"Sending..."),i())}var oe=(()=>{class e{constructor(n,m,t){this.fb=n,this.authFacade=m,this.authService=t,this.loading=!1,this.successMessage="",this.errorMessage="",this.isTenantAdmin=!1,this.isPlatformAdmin=!1,this.isPlatformSuperAdmin=!1,this.inviteForm=this.fb.group({email:["",[f.required,f.email]],role:["",f.required]})}ngOnInit(){let n=this.authService.getCurrentUserValue();n&&(this.isTenantAdmin=n.role===c.TENANT_ADMIN,this.isPlatformAdmin=n.role===c.PLATFORM_ADMIN||n.role===c.PLATFORM_SUPER_ADMIN,this.isPlatformSuperAdmin=n.role===c.PLATFORM_SUPER_ADMIN)}get email(){return this.inviteForm.get("email")}get role(){return this.inviteForm.get("role")}onSubmit(){if(this.inviteForm.valid){this.loading=!0,this.successMessage="",this.errorMessage="";let n={email:this.email?.value,role:this.role?.value};this.authFacade.sendInvitation(n).subscribe({next:()=>{this.loading=!1,this.successMessage=`Invitation sent to ${n.email}`,this.inviteForm.reset()},error:m=>{this.loading=!1,this.errorMessage=m.message||"Failed to send invitation"}})}}static{this.\u0275fac=function(m){return new(m||e)(u(F),u(D),u(S))}}static{this.\u0275cmp=_({type:e,selectors:[["app-invite-user"]],standalone:!0,features:[C],decls:28,vars:16,consts:[[1,"invite-container"],[1,"invite-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","user@example.com",1,"form-control"],["class","error-message",4,"ngIf"],["for","role"],["id","role","formControlName","role",1,"form-control"],["value",""],["value","RECRUITER",4,"ngIf"],["value","TENANT_ADMIN",4,"ngIf"],["value","BILLING_MANAGER",4,"ngIf"],["value","PLATFORM_ADMIN",4,"ngIf"],["class","success-message",4,"ngIf"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],[1,"error-message"],["value","RECRUITER"],["value","TENANT_ADMIN"],["value","BILLING_MANAGER"],["value","PLATFORM_ADMIN"],[1,"success-message"]],template:function(m,t){m&1&&(o(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Invite User"),i(),o(4,"p"),a(5,"Send an invitation to create an account"),i(),o(6,"form",2),h("ngSubmit",function(){return t.onSubmit()}),o(7,"div",3)(8,"label",4),a(9,"Email Address"),i(),I(10,"input",5),d(11,G,3,2,"div",6),i(),o(12,"div",3)(13,"label",7),a(14,"Role"),i(),o(15,"select",8)(16,"option",9),a(17,"Select role"),i(),d(18,k,2,0,"option",10)(19,q,2,0,"option",11)(20,z,2,0,"option",12)(21,V,2,0,"option",13),i(),d(22,j,2,1,"div",6),i(),d(23,$,2,1,"div",14)(24,H,2,1,"div",6),o(25,"button",15),d(26,J,2,0,"span",16)(27,K,2,0,"span",16),i()()()()),m&2&&(r(6),l("formGroup",t.inviteForm),r(4),v("error",(t.email==null?null:t.email.invalid)&&(t.email==null?null:t.email.touched)),r(),l("ngIf",(t.email==null?null:t.email.invalid)&&(t.email==null?null:t.email.touched)),r(4),v("error",(t.role==null?null:t.role.invalid)&&(t.role==null?null:t.role.touched)),r(3),l("ngIf",t.isTenantAdmin||t.isPlatformAdmin),r(),l("ngIf",t.isTenantAdmin||t.isPlatformAdmin),r(),l("ngIf",t.isPlatformAdmin),r(),l("ngIf",t.isPlatformSuperAdmin),r(),l("ngIf",(t.role==null?null:t.role.invalid)&&(t.role==null?null:t.role.touched)),r(),l("ngIf",t.successMessage),r(),l("ngIf",t.errorMessage),r(),l("disabled",t.inviteForm.invalid||t.loading),r(),l("ngIf",!t.loading),r(),l("ngIf",t.loading))},dependencies:[b,M,R,x,O,U,A,y,E,P,T,N],styles:[".invite-container[_ngcontent-%COMP%]{padding:2rem}.invite-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;padding:2rem;max-width:500px}h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin-bottom:.5rem}p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#475569;margin-bottom:.5rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:1px solid #e2e8f0;border-radius:8px;font-size:.875rem;transition:all .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#06f;box-shadow:0 0 0 3px #0066ff1a}.form-control.error[_ngcontent-%COMP%]{border-color:#ef4444}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.75rem;margin-top:.5rem}.success-message[_ngcontent-%COMP%]{color:#10b981;font-size:.875rem;margin-bottom:1rem;padding:.75rem;background:#d1fae5;border-radius:8px}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .2s;background:#06f;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0052cc}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}"]})}}return e})();export{oe as InviteUserComponent};
